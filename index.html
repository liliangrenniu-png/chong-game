<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ²»æ„ˆé»‘çŒ«ï¼šäº‘ç«¯å°å±‹</title>
    <style>
        /* --- 1. å…¨å±€è®¾ç½® --- */
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden;
            font-family: "Microsoft YaHei", cursive;
            background-color: #333; /* åŠ è½½å‰çš„åº•è‰² */
            cursor: url('https://cdn-icons-png.flaticon.com/32/8066/8066265.png'), auto; /* é€—çŒ«æ£’å…‰æ ‡ */
        }

        /* --- 2. åŠ¨ç”»èƒŒæ™¯ (å‰åœåŠ›é£æ ¼) --- */
        #game-stage {
            position: relative; width: 100%; height: 100%;
            /* ä½¿ç”¨ä¸€å¼ æ¸©é¦¨çš„å®¤å†…æ’ç”»ä½œä¸ºèƒŒæ™¯ */
            background: url('https://images.unsplash.com/photo-1513694203232-719a280e022f?q=80&w=1920&auto=format&fit=crop') no-repeat center center;
            background-size: cover;
        }
        
        /* èƒŒæ™¯æ»¤é•œï¼Œè®©ç…§ç‰‡çœ‹èµ·æ¥åƒæ‰‹ç»˜ */
        .bg-filter {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 240, 220, 0.2); /* æš–è‰²æ»¤é•œ */
            backdrop-filter: blur(2px) contrast(0.9) brightness(1.1);
            pointer-events: none;
        }

        /* ç©ºæ°”ä¸­çš„é­”æ³•å°˜åŸƒ */
        .dust {
            position: absolute; width: 4px; height: 4px;
            background: white; border-radius: 50%;
            box-shadow: 0 0 10px white;
            animation: float-dust 10s linear infinite;
            opacity: 0.6; pointer-events: none;
        }
        @keyframes float-dust {
            0% { transform: translateY(100vh) translateX(0); opacity: 0; }
            50% { opacity: 0.8; }
            100% { transform: translateY(-100px) translateX(50px); opacity: 0; }
        }

        /* --- 3. ä¸»è§’ï¼šé«˜äº’åŠ¨å°é»‘çŒ« --- */
        #cat-container {
            position: absolute; 
            left: 50%; bottom: 15%; /* æ”¾åœ¨ç”»é¢ä¸­é—´åä¸‹ */
            transform: translateX(-50%);
            width: 300px; height: 300px;
            z-index: 10;
            transition: transform 0.1s; /* æå…¶å¾®å°çš„è·Ÿéšå»¶è¿Ÿï¼Œå¢åŠ é‡é‡æ„Ÿ */
        }

        /* çŒ«å’ªèº«ä½“ - ä½¿ç”¨é«˜æ¸…ç´ æ */
        .cat-body {
            width: 100%; height: 100%;
            /* è¿™é‡Œä½¿ç”¨ä¸€å¼ éå¸¸å¯çˆ±çš„é»‘çŒ«ç´ æ */
            background-image: url('https://cdn.pixabay.com/photo/2016/03/31/19/20/animal-1294863_1280.png');
            background-size: contain; background-repeat: no-repeat; background-position: bottom center;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5)); /* ç«‹ä½“æŠ•å½± */
            transform-origin: bottom center;
            animation: breathe 3s ease-in-out infinite; /* å‘¼å¸åŠ¨ç”» */
        }

        /* çœ¼ç›å®¹å™¨ - ç”¨äºå®ç°è§†çº¿è·Ÿéš */
        .eyes-wrapper {
            position: absolute; top: 100px; left: 50%; transform: translateX(-50%);
            width: 100px; height: 40px;
            display: flex; justify-content: space-between;
        }
        
        /* çœ¼ç™½ */
        .eye {
            width: 32px; height: 32px;
            background: #fff; border-radius: 50%;
            position: relative; overflow: hidden;
            box-shadow: inset 2px 2px 5px rgba(0,0,0,0.5);
            transition: height 0.1s; /* çœ¨çœ¼é€Ÿåº¦ */
        }
        
        /* çœ¼ç  (è·Ÿéšé¼ æ ‡) */
        .pupil {
            width: 14px; height: 14px;
            background: #000; border-radius: 50%;
            position: absolute; top: 9px; left: 9px;
            border: 2px solid #fbceb1; /* é‡‘è‰²ç³å­”è¾¹æ¡† */
        }

        /* å˜´å·´ (å–‚é£Ÿæ—¶å¼ å¼€) */
        .mouth {
            position: absolute; top: 135px; left: 50%; transform: translateX(-50%);
            width: 20px; height: 10px; background: #ff9a9e;
            border-radius: 0 0 20px 20px;
            opacity: 0; transition: 0.2s;
        }

        /* --- 4. äº¤äº’åé¦ˆåŠ¨ç”» --- */
        
        /* å‘¼å¸ */
        @keyframes breathe { 0%, 100% { transform: scaleY(1); } 50% { transform: scaleY(1.02); } }
        
        /* è¢«æ‘¸èˆ’æœäº† */
        .purring { animation: vibrate 0.2s linear infinite !important; }
        @keyframes vibrate { 0% { transform: rotate(0deg); } 25% { transform: rotate(1deg); } 75% { transform: rotate(-1deg); } }

        /* Qå¼¹æœå†»æ•ˆæœ (ç‚¹å‡»æ—¶) */
        .jelly-jump { animation: jelly 0.6s cubic-bezier(0.25, 1.5, 0.5, 1); }
        @keyframes jelly {
            0% { transform: scale(1, 1); }
            30% { transform: scale(1.25, 0.75) translateY(20px); }
            40% { transform: scale(0.75, 1.25) translateY(-20px); }
            50% { transform: scale(1.15, 0.85) translateY(0); }
            65% { transform: scale(0.95, 1.05) translateY(-10px); }
            100% { transform: scale(1, 1); }
        }

        /* --- 5. æ‰è½ç‰©ä¸ç²’å­ --- */
        .item-drop {
            position: absolute; font-size: 40px; z-index: 20;
            animation: drop-down 1s ease-in forwards;
        }
        @keyframes drop-down { to { top: 60%; opacity: 0; transform: scale(0.5); } }

        .love-particle {
            position: absolute; font-size: 30px; pointer-events: none; z-index: 30;
            animation: float-up 1.5s ease-out forwards;
            text-shadow: 0 0 10px pink;
        }
        @keyframes float-up { 
            0% { transform: translate(0, 0) scale(0.5); opacity: 1; }
            100% { transform: translate(var(--tx), -150px) scale(1.5) rotate(var(--r)); opacity: 0; }
        }

        /* --- 6. æ¸¸æˆUI --- */
        #ui-bar {
            position: absolute; bottom: 30px; width: 100%;
            display: flex; justify-content: center; gap: 30px; z-index: 100;
        }

        .action-btn {
            width: 80px; height: 80px;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            border: 3px solid #fff;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            transition: 0.2s;
        }
        .action-btn:hover { transform: translateY(-5px); background: white; }
        .action-btn:active { transform: scale(0.9); }
        .icon { font-size: 30px; margin-bottom: 5px; }
        .label { font-size: 14px; font-weight: bold; color: #555; }

        #status-text {
            position: absolute; top: 10%; width: 100%; text-align: center;
            font-size: 24px; color: #fff; text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            pointer-events: none; opacity: 0; transition: opacity 0.3s;
        }
    </style>
</head>
<body>

<div id="game-stage">
    <div class="bg-filter"></div>
    <div id="dust-container"></div>

    <div id="status-text">å–µå‘œ~ (å¥½èˆ’æœ)</div>

    <div id="cat-container">
        <div class="cat-body" id="cat-visual">
            <div class="eyes-wrapper">
                <div class="eye"><div class="pupil"></div></div>
                <div class="eye"><div class="pupil"></div></div>
            </div>
            <div class="mouth" id="cat-mouth"></div>
        </div>
    </div>

    <div id="ui-bar">
        <div class="action-btn" onclick="feedCat()">
            <div class="icon">ğŸŸ</div>
            <div class="label">å–‚é£Ÿ</div>
        </div>
        <div class="action-btn" onclick="playBall()">
            <div class="icon">ğŸ§¶</div>
            <div class="label">ç©çƒ</div>
        </div>
        <div class="action-btn" onclick="cleanCat()">
            <div class="icon">âœ¨</div>
            <div class="label">æ´—é¦™é¦™</div>
        </div>
    </div>
</div>

<script>
    const catContainer = document.getElementById('cat-container');
    const catVisual = document.getElementById('cat-visual');
    const pupils = document.querySelectorAll('.pupil');
    const eyes = document.querySelectorAll('.eye');
    const mouth = document.getElementById('cat-mouth');
    const statusText = document.getElementById('status-text');

    // 1. ç”ŸæˆèƒŒæ™¯æ°›å›´å°˜åŸƒ
    for(let i=0; i<20; i++) {
        let d = document.createElement('div');
        d.className = 'dust';
        d.style.left = Math.random() * 100 + 'vw';
        d.style.animationDelay = Math.random() * 5 + 's';
        d.style.animationDuration = 5 + Math.random() * 10 + 's';
        document.getElementById('dust-container').appendChild(d);
    }

    // 2. æ ¸å¿ƒï¼šè§†çº¿è·Ÿéš (è®©çŒ«æ´»è¿‡æ¥)
    document.addEventListener('mousemove', (e) => {
        const rect = catContainer.getBoundingClientRect();
        const catX = rect.left + rect.width / 2;
        const catY = rect.top + 120; // çœ¼ç›çš„å¤§è‡´é«˜åº¦

        const angle = Math.atan2(e.clientY - catY, e.clientX - catX);
        const dist = Math.min(5, Math.hypot(e.clientX - catX, e.clientY - catY) / 15);

        pupils.forEach(p => {
            p.style.transform = `translate(${Math.cos(angle)*dist}px, ${Math.sin(angle)*dist}px)`;
        });
    });

    // 3. æ ¸å¿ƒï¼šæŠšæ‘¸äº¤äº’ (Rubbing)
    let rubCount = 0;
    let isPurring = false;
    
    catContainer.addEventListener('mousemove', () => {
        rubCount++;
        if(rubCount > 5) { // è¿ç»­ç§»åŠ¨æ‰ç®—æŠšæ‘¸
            if(!isPurring) startPurr();
            spawnLove(event.clientX, event.clientY);
            rubCount = 0;
        }
    });

    catContainer.addEventListener('mouseleave', stopPurr);
    
    // ç‚¹å‡»Qå¼¹æ•ˆæœ
    catContainer.addEventListener('mousedown', () => {
        catVisual.style.transform = 'scale(1.1, 0.9)'; // å‹æ‰
    });
    catContainer.addEventListener('mouseup', () => {
        catVisual.style.transform = 'scale(1, 1)';
        catVisual.classList.remove('jelly-jump');
        void catVisual.offsetWidth; // å¼ºåˆ¶é‡ç»˜
        catVisual.classList.add('jelly-jump'); // å¼¹èµ·
        showText("å–µï¼(å¼€å¿ƒ)");
    });

    function startPurr() {
        isPurring = true;
        catVisual.classList.add('purring');
        eyes.forEach(e => e.style.height = '4px'); // çœ¯çœ¼
        showText("å‘¼å™œå‘¼å™œ... (å¥½èˆ’æœ)");
    }

    function stopPurr() {
        isPurring = false;
        catVisual.classList.remove('purring');
        eyes.forEach(e => e.style.height = '32px'); // ççœ¼
        hideText();
    }

    // 4. åŠŸèƒ½ï¼šå–‚é£Ÿ
    function feedCat() {
        // ç”Ÿæˆæ‰è½çš„å°é±¼å¹²
        spawnDropItem('ğŸŸ');
        
        // çŒ«å’ªå¼ å˜´åŠ¨ä½œ
        setTimeout(() => {
            mouth.style.opacity = 1;
            mouth.style.height = '20px'; // å¼ å˜´
            catVisual.style.transform = 'scale(1.1)'; // èº«ä½“å‰å€¾
        }, 500);

        setTimeout(() => {
            mouth.style.opacity = 0;
            mouth.style.height = '10px';
            catVisual.style.transform = 'scale(1)';
            showText("å§å”§å§å”§... å¥½åƒï¼");
            // çˆ†å‡ºçˆ±å¿ƒ
            for(let i=0; i<5; i++) spawnLove(window.innerWidth/2, window.innerHeight/2);
        }, 1200);
    }

    // 5. åŠŸèƒ½ï¼šç©çƒ
    function playBall() {
        spawnDropItem('ğŸ§¶');
        // çŒ«å’ªå·¦å³è·³åŠ¨
        catVisual.style.animation = 'none';
        setTimeout(() => {
            catVisual.style.transition = '0.2s';
            catVisual.style.transform = 'translateX(-20px) rotate(-10deg)';
            setTimeout(() => {
                catVisual.style.transform = 'translateX(20px) rotate(10deg)';
                setTimeout(() => {
                    catVisual.style.transform = 'translate(0) rotate(0)';
                    catVisual.style.animation = 'breathe 3s ease-in-out infinite';
                    showText("å¥½ç©ï¼å†æ¥ä¸€æ¬¡ï¼");
                }, 300);
            }, 300);
        }, 600);
    }

    // 6. åŠŸèƒ½ï¼šæ´—æ¾¡
    function cleanCat() {
        spawnDropItem('ğŸ§¼');
        // èº«ä¸Šå†’æ³¡æ³¡
        for(let i=0; i<8; i++) {
            setTimeout(() => spawnLove(window.innerWidth/2 + (Math.random()-0.5)*100, window.innerHeight/2 + (Math.random()-0.5)*100, 'ğŸ«§'), i*100);
        }
        showText("å˜å¾—é¦™å–·å–·äº†ï¼");
    }

    // å·¥å…·ï¼šç”Ÿæˆæ‰è½ç‰©
    function spawnDropItem(char) {
        let item = document.createElement('div');
        item.className = 'item-drop';
        item.innerText = char;
        item.style.left = '50%';
        item.style.top = '10%';
        item.style.transform = 'translateX(-50%)';
        document.body.appendChild(item);
        setTimeout(() => item.remove(), 1000);
    }

    // å·¥å…·ï¼šç”Ÿæˆçˆ±å¿ƒ/ç²’å­
    function spawnLove(x, y, char='ğŸ’–') {
        let p = document.createElement('div');
        p.className = 'love-particle';
        p.innerText = char;
        p.style.left = x + 'px';
        p.style.top = y + 'px';
        
        // éšæœºé£èˆæ–¹å‘
        let tx = (Math.random() - 0.5) * 100 + 'px';
        let r = (Math.random() - 0.5) * 45 + 'deg';
        p.style.setProperty('--tx', tx);
        p.style.setProperty('--r', r);

        document.body.appendChild(p);
        setTimeout(() => p.remove(), 1500);
    }

    // å·¥å…·ï¼šæ˜¾ç¤ºæ–‡å­—
    let textTimer;
    function showText(str) {
        statusText.innerText = str;
        statusText.style.opacity = 1;
        clearTimeout(textTimer);
        textTimer = setTimeout(hideText, 2000);
    }
    function hideText() {
        statusText.style.opacity = 0;
    }

</script>
</body>
</html>
