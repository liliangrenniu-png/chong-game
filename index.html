<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çµå¢ƒçŒ«è¯­ï¼šæ£®ä¹‹å›½åº¦</title>
    <style>
        /* --- 1. ä¸–ç•Œåœºæ™¯ --- */
        body {
            margin: 0; padding: 0;
            overflow: hidden;
            background: linear-gradient(to bottom, #a8edea 0%, #fed6e3 100%); /* æ¢¦å¹»å¤©ç©º */
            height: 100vh;
            font-family: "Segoe UI", cursive, sans-serif;
        }

        #world {
            position: relative;
            width: 100%; height: 100%;
            background-color: #78e08f; /* è‰åœ°åº•è‰² */
            background-image: 
                radial-gradient(circle at 20% 30%, #b8e994 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, #82ccdd 0%, transparent 40%); /* è‰åœ°å…‰å½±å˜åŒ– */
            overflow: hidden;
        }

        /* --- 2. ç¯å¢ƒå…ƒç´  --- */
        /* å°è·¯ */
        .path-layer {
            position: absolute; top: 50%; left: 0; width: 100%; height: 120px;
            background: #dcdde1;
            border-top: 4px dashed #b2bec3;
            border-bottom: 4px dashed #b2bec3;
            transform: rotate(-5deg) scale(1.2); /* å€¾æ–œåˆ›é€ é€è§†æ„Ÿ */
            box-shadow: inset 0 0 20px rgba(0,0,0,0.1);
        }

        /* é€šç”¨ç‰©ä½“æ ·å¼ */
        .object { position: absolute; pointer-events: none; }

        /* æ ‘æœ¨/å°æ ‘è‹— */
        .tree {
            width: 60px; height: 80px;
            display: flex; flex-direction: column; align-items: center;
            z-index: 5; /* æ ‘æœ¨è¦èƒ½é®æŒ¡è§’è‰² */
        }
        .tree-top {
            width: 60px; height: 60px; background: #00b894; border-radius: 50%;
            box-shadow: inset -5px -5px #00cec9;
        }
        .tree-trunk { width: 15px; height: 25px; background: #634200; margin-top: -5px; }
        .sapling .tree-top { width: 30px; height: 30px; background: #55efc4; } /* å°æ ‘è‹—æ›´å«©ç»¿ */
        .sapling .tree-trunk { width: 8px; height: 15px; }

        /* NPCåŠ¨ç‰© */
        .npc-animal { font-size: 30px; z-index: 4; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.2)); }

        /* --- 3. ä¸»è§’ï¼šçŒ«çµ (æ ¸å¿ƒè®¾è®¡) --- */
        #player {
            position: absolute;
            width: 60px; height: 60px;
            z-index: 10;
            transition: all 0.1s ease-out; /* ä¸æ»‘ç§»åŠ¨ */
        }

        /* çŒ«çµèº«ä½“å®¹å™¨ */
        .spirit-body {
            position: relative; width: 100%; height: 100%;
            animation: float 2s ease-in-out infinite; /* ä¸Šä¸‹æµ®åŠ¨ */
        }

        /* æ ¸å¿ƒï¼šå‘å…‰çš„çµä½“ */
        .core {
            width: 40px; height: 50px;
            border-radius: 25px 25px 40px 40px; /* ç±»ä¼¼çŒ«åå§¿çš„æ¤­åœ† */
            position: absolute; bottom: 0; left: 10px;
            background: var(--spirit-color, rgba(255, 255, 255, 0.8));
            box-shadow: 0 0 20px var(--spirit-glow, white); /* å‘å…‰ç‰¹æ•ˆ */
            backdrop-filter: blur(5px); /* åŠé€æ˜ç£¨ç ‚æ„Ÿ */
            border: 2px solid rgba(255,255,255,0.5);
        }

        /* çŒ«è€³ (é‡è¦ç‰¹å¾) */
        .ears { position: absolute; top: -5px; width: 100%; display: flex; justify-content: space-between; padding: 0 5px; box-sizing: border-box; }
        .ear {
            width: 0; height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 15px solid var(--spirit-color, rgba(255, 255, 255, 0.8));
            filter: drop-shadow(0 0 5px var(--spirit-glow));
        }

        /* çœ¼ç› */
        .eyes { position: absolute; top: 15px; width: 100%; display: flex; justify-content: center; gap: 10px;}
        .eye { width: 6px; height: 8px; background: #fff; border-radius: 50%; }

        /* å…ƒç´ è£…é¥° (ç¿…è†€/å¶å­/ç«ç„°) */
        .element-deco { position: absolute; font-size: 20px; top: 20px; right: -10px; opacity: 0.8; animation: spin 3s linear infinite;}

        /* --- 4. ä¸åŒç§ç±»çš„çŒ«çµçš®è‚¤ --- */
        /* æ£®ä¹‹çµ */
        .nature-spirit { --spirit-color: rgba(85, 239, 196, 0.7); --spirit-glow: #00b894; }
        .nature-spirit .element-deco::after { content: 'ğŸƒ'; }
        /* ç«ä¹‹çµ */
        .fire-spirit { --spirit-color: rgba(250, 177, 160, 0.7); --spirit-glow: #e17055; }
        .fire-spirit .element-deco::after { content: 'ğŸ”¥'; }
        /* æ°´ä¹‹çµ */
        .water-spirit { --spirit-color: rgba(116, 185, 255, 0.7); --spirit-glow: #0984e3; }
        .water-spirit .element-deco::after { content: 'ğŸ’§'; }


        /* åŠ¨ç”» */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* äº¤äº’æ°”æ³¡ */
        .interaction-bubble {
            position: absolute; top: -30px; left: 10px;
            font-size: 24px; animation: pop-up 1s forwards;
        }
        @keyframes pop-up { 0% { transform: scale(0); opacity: 0;} 50% { transform: scale(1.2); opacity: 1;} 100% { transform: scale(1) translateY(-20px); opacity: 0;} }

        /* UI */
        #ui-panel {
            position: absolute; top: 20px; left: 20px;
            background: rgba(255,255,255,0.8); padding: 15px; border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .btn {
            background: #fff; border: 2px solid #eee; padding: 5px 10px; cursor: pointer; border-radius: 10px; font-size: 14px;
        }
        .btn:hover { background: #f1f2f6; }

    </style>
</head>
<body>

    <div id="world">
        <div class="path-layer"></div>

        <div class="object tree" style="top: 100px; left: 200px;"><div class="tree-top"></div><div class="tree-trunk"></div></div>
        <div class="object tree sapling" style="top: 350px; left: 50px;"><div class="tree-top"></div><div class="tree-trunk"></div></div>
        <div class="object tree" style="top: 400px; left: 600px;"><div class="tree-top"></div><div class="tree-trunk"></div></div>
        <div class="object" style="top: 500px; left: 300px; font-size: 20px;">ğŸ„</div>
        <div class="object" style="top: 150px; left: 700px; font-size: 20px;">ğŸŒ¸</div>

        <div class="object npc-animal" data-type="npc" style="top: 250px; left: 450px;">ğŸ•</div>
        <div class="object npc-animal" data-type="npc" style="top: 550px; left: 150px;">ğŸˆ</div>
        <div class="object npc-animal" data-type="npc" style="top: 100px; left: 50px;">ğŸ‡</div>


        <div id="player">
            <div class="spirit-body nature-spirit" id="player-skin">
                <div class="ears"><div class="ear"></div><div class="ear"></div></div>
                <div class="core">
                    <div class="eyes"><div class="eye"></div><div class="eye"></div></div>
                </div>
                <div class="element-deco"></div>
            </div>
        </div>

    </div>

    <div id="ui-panel">
        <h3 style="margin: 0 0 10px 0;">æ£®ä¹‹å›½åº¦</h3>
        <p style="font-size: 12px; color: #666;">ä½¿ç”¨æ–¹å‘é”®ç§»åŠ¨ï¼Œé è¿‘å°åŠ¨ç‰©æ‰“æ‹›å‘¼</p>
        <div>
            åˆ‡æ¢å½¢æ€: 
            <button class="btn" onclick="changeSkin('nature-spirit')">æ£®ğŸƒ</button>
            <button class="btn" onclick="changeSkin('fire-spirit')">ç«ğŸ”¥</button>
            <button class="btn" onclick="changeSkin('water-spirit')">æ°´ğŸ’§</button>
        </div>
    </div>

<script>
    const player = document.getElementById('player');
    const playerSkin = document.getElementById('player-skin');
    const world = document.getElementById('world');
    
    let playerPos = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
    let speed = 15; // ç§»åŠ¨é€Ÿåº¦
    let keysPressed = {};

    // åˆå§‹åŒ–ä½ç½®
    updatePlayerPos();

    // çš®è‚¤åˆ‡æ¢
    function changeSkin(skinName) {
        playerSkin.className = 'spirit-body ' + skinName;
    }

    // æ ¸å¿ƒç§»åŠ¨é€»è¾‘ (å¹³æ»‘ç§»åŠ¨)
    function updatePlayerPos() {
        // è¾¹ç•Œé™åˆ¶
        playerPos.x = Math.max(0, Math.min(window.innerWidth - 60, playerPos.x));
        playerPos.y = Math.max(0, Math.min(window.innerHeight - 60, playerPos.y));
        
        player.style.transform = `translate(${playerPos.x}px, ${playerPos.y}px)`;
        
        checkInteraction();
    }

    // é”®ç›˜äº‹ä»¶ç›‘å¬
    document.addEventListener('keydown', (e) => {
        keysPressed[e.key] = true;
        movePlayer();
    });
    document.addEventListener('keyup', (e) => {
        delete keysPressed[e.key];
    });

    function movePlayer() {
        if (keysPressed['ArrowUp']) playerPos.y -= speed;
        if (keysPressed['ArrowDown']) playerPos.y += speed;
        if (keysPressed['ArrowLeft']) playerPos.x -= speed;
        if (keysPressed['ArrowRight']) playerPos.x += speed;
        updatePlayerPos();
    }

    // ç®€å•çš„äº¤äº’æ£€æµ‹
    let lastInteractionTime = 0;
    function checkInteraction() {
        const now = Date.now();
        if (now - lastInteractionTime < 1000) return; // å†·å´æ—¶é—´

        const npcs = document.querySelectorAll('.npc-animal');
        npcs.forEach(npc => {
            const npcRect = npc.getBoundingClientRect();
            const playerRect = player.getBoundingClientRect();
            
            // è®¡ç®—ä¸­å¿ƒç‚¹è·ç¦»
            const dx = (playerRect.left + playerRect.width/2) - (npcRect.left + npcRect.width/2);
            const dy = (playerRect.top + playerRect.height/2) - (npcRect.top + npcRect.height/2);
            const distance = Math.sqrt(dx*dx + dy*dy);

            if (distance < 60) { // å¦‚æœè·ç¦»å°äº60åƒç´ 
                showInteraction(npc);
                lastInteractionTime = now;
            }
        });
    }

    function showInteraction(target) {
        const bubble = document.createElement('div');
        bubble.className = 'interaction-bubble';
        bubble.innerText = 'â¤ï¸';
        target.appendChild(bubble);
        setTimeout(() => bubble.remove(), 1000);
    }

</script>
</body>
</html>
