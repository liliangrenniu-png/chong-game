<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ˜Ÿæ„¿å–µçµï¼šå…¨æ‹ŸçœŸæ¢¦å¹»ä¹å›­</title>
    <style>
        :root {
            --sky-blue: #a2d2ff; --soft-purple: #cdb4db; --magic-gold: #ffda08;
        }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: "PingFang SC"; }

        /* --- æ¢¦å¹»å¤šå±‚æ¬¡åœºæ™¯ --- */
        #stage { width: 100vw; height: 100vh; position: relative; transition: 1.5s; }
        
        /* åœºæ™¯è£…é¥°ç‰© */
        .furniture { position: absolute; pointer-events: none; opacity: 0.6; }
        
        /* å¨æˆ¿åœºæ™¯ */
        .bg-kitchen { background: linear-gradient(180deg, #ffafbd 0%, #ffc3a0 100%); }
        .bg-kitchen .stove { bottom: 10%; left: 10%; font-size: 150px; }

        /* å§å®¤åœºæ™¯ */
        .bg-bedroom { background: linear-gradient(180deg, #a18cd1 0%, #fbc2eb 100%); }
        .bg-bedroom .bed { bottom: 20%; right: 10%; font-size: 200px; }

        /* æµ´å®¤åœºæ™¯ */
        .bg-bathroom { background: linear-gradient(180deg, #84fab0 0%, #8fd3f4 100%); }
        .bg-bathroom .tub { bottom: 5%; left: 50%; transform: translateX(-50%); font-size: 180px; }

        /* --- ç«‹ä½“çŒ«å’ªæ„é€  --- */
        .cat {
            position: absolute; width: 160px; height: 140px;
            transition: all 1.2s cubic-bezier(0.45, 0.05, 0.55, 0.95);
            cursor: pointer; z-index: 50;
        }

        .cat-body-wrap { position: relative; width: 100%; height: 100%; animation: float 3s infinite ease-in-out; }
        
        /* èº«ä½“ç»„ä»¶ */
        .c-body { 
            position: absolute; width: 90px; height: 60px; background: #fff; 
            border-radius: 50px 50px 40px 40px; bottom: 30px; left: 35px;
            box-shadow: inset -8px -8px 15px rgba(0,0,0,0.1), 0 10px 20px rgba(0,0,0,0.1);
        }
        .c-head { 
            position: absolute; width: 80px; height: 75px; background: #fff; 
            border-radius: 50% 50% 45% 45%; top: 5px; left: 40px; z-index: 10;
            box-shadow: inset 2px 5px 10px rgba(255,255,255,0.8), 0 5px 15px rgba(0,0,0,0.1);
        }
        .c-eye { 
            position: absolute; width: 10px; height: 10px; background: #333; 
            border-radius: 50%; top: 35px; transition: 0.3s;
        }
        .eye-l { left: 20px; } .eye-r { right: 20px; }
        
        .c-wing { 
            position: absolute; font-size: 50px; top: -10px; opacity: 0.7; 
            animation: flap 0.4s infinite alternate; filter: drop-shadow(0 0 5px white);
        }
        .w-l { left: 10px; transform: scaleX(-1); } .w-r { right: 10px; }

        .c-tail { 
            position: absolute; width: 40px; height: 15px; background: #fff; 
            right: 15px; bottom: 45px; border-radius: 20px; 
            transform-origin: left; animation: wag 0.8s infinite;
        }

        .c-paw { position: absolute; width: 15px; height: 20px; background: #fff; border-radius: 10px; bottom: 15px; }
        .p-1 { left: 45px; } .p-2 { left: 75px; }

        /* è£…é¥°å“æ§½ä½ */
        .accessory { position: absolute; top: -15px; left: 50%; transform: translateX(-50%); font-size: 40px; display: none; z-index: 20; }

        /* --- åŠ¨ç”» --- */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        @keyframes flap { from { transform: rotate(0); } to { transform: rotate(-30deg); } }
        @keyframes wag { from { transform: rotate(-10deg); } to { transform: rotate(30deg); } }
        @keyframes eat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1) translateY(5px); } }

        /* --- äº¤äº’å…ƒç´  --- */
        .food { position: absolute; font-size: 40px; z-index: 5; animation: bounce 0.6s infinite alternate; }
        @keyframes bounce { from { transform: scale(1); } to { transform: scale(1.2); } }

        /* UIè®¾è®¡ */
        #gui { position: absolute; top: 25px; left: 25px; z-index: 1000; }
        .coin-box { background: rgba(255,255,255,0.4); padding: 15px 25px; border-radius: 30px; backdrop-filter: blur(10px); border: 2px solid white; font-size: 20px; font-weight: bold; color: #555; }
        
        .menu { position: absolute; bottom: 30px; width: 100%; display: flex; justify-content: center; gap: 15px; z-index: 1000; }
        .btn { padding: 15px 30px; border-radius: 50px; border: none; background: white; box-shadow: 0 10px 20px rgba(0,0,0,0.1); cursor: pointer; transition: 0.3s; font-weight: bold; font-size: 16px; }
        .btn:hover { transform: translateY(-5px); background: var(--magic-gold); }
    </style>
</head>
<body>

<div id="stage" class="bg-kitchen">
    <div class="furniture stove" id="deco-item">ğŸ³</div>

    <div id="gui">
        <div class="coin-box">âœ¨ æ˜Ÿæ„¿å¸: <span id="coins">20</span></div>
    </div>

    <div class="menu">
        <button class="btn" onclick="throwFood()">ğŸŸ æŠ•å–‚å°é±¼</button>
        <button class="btn" onclick="playWand()">ğŸ§¶ é€—çŒ«æ£’ (2é‡‘)</button>
        <button class="btn" onclick="changeScene()">ğŸšª æ¢æˆ¿é—´ (6é‡‘)</button>
        <button class="btn" onclick="dressUp()">ğŸ© æ¢è£… (6é‡‘)</button>
        <button class="btn" onclick="hatchEgg()">ğŸ¥š å­µåŒ– (12é‡‘)</button>
    </div>
</div>

<script>
    let coins = 20;
    let cats = [];
    const stage = document.getElementById('stage');
    const scenes = [
        { name: 'å¨æˆ¿', class: 'bg-kitchen', icon: 'ğŸ³', decoClass: 'stove' },
        { name: 'å§å®¤', class: 'bg-bedroom', icon: 'ğŸ›ï¸', decoClass: 'bed' },
        { name: 'æµ´å®¤', class: 'bg-bathroom', icon: 'ğŸ›', decoClass: 'tub' }
    ];
    let sceneIdx = 0;

    class MagicalCat {
        constructor() {
            this.x = Math.random() * (window.innerWidth - 200);
            this.y = Math.random() * (window.innerHeight - 250) + 100;
            this.color = `hsl(${Math.random() * 360}, 100%, 85%)`;
            this.isEating = false;
            this.hasHat = false;
            this.create();
            this.ai();
        }

        create() {
            this.el = document.createElement('div');
            this.el.className = 'cat';
            this.el.innerHTML = `
                <div class="cat-body-wrap">
                    <div class="accessory">ğŸ©</div>
                    <div class="c-wing w-l">ğŸ•Šï¸</div>
                    <div class="c-wing w-r">ğŸ•Šï¸</div>
                    <div class="c-tail" style="background:${this.color}"></div>
                    <div class="c-body" style="background:${this.color}"></div>
                    <div class="c-head" style="background:${this.color}">
                        <div class="c-eye eye-l"></div>
                        <div class="c-eye eye-r"></div>
                    </div>
                    <div class="c-paw p-1" style="background:${this.color}"></div>
                    <div class="c-paw p-2" style="background:${this.color}"></div>
                </div>
            `;
            this.el.onclick = () => this.meow();
            stage.appendChild(this.el);
            this.update();
        }

        update() {
            this.el.style.left = this.x + 'px';
            this.el.style.top = this.y + 'px';
        }

        meow() {
            coins++;
            updateCoins();
            this.el.style.transform = 'scale(1.2)';
            setTimeout(() => this.el.style.transform = 'scale(1)', 200);
        }

        ai() {
            setInterval(() => {
                if (!this.isEating) {
                    this.x += (Math.random() - 0.5) * 300;
                    this.y += (Math.random() - 0.5) * 200;
                    this.x = Math.max(50, Math.min(window.innerWidth - 180, this.x));
                    this.y = Math.max(100, Math.min(window.innerHeight - 200, this.y));
                    this.update();
                }
            }, 3000);
        }

        async eat(tx, ty) {
            this.isEating = true;
            this.x = tx - 50; this.y = ty - 50;
            this.update();
            this.el.querySelector('.cat-body-wrap').style.animation = 'eat 0.3s infinite';
            await new Promise(r => setTimeout(r, 2000));
            this.el.querySelector('.cat-body-wrap').style.animation = '';
            this.isEating = false;
        }

        toggleHat() {
            this.hasHat = !this.hasHat;
            this.el.querySelector('.accessory').style.display = this.hasHat ? 'block' : 'none';
            if(this.hasHat) this.el.style.filter = 'drop-shadow(0 0 10px gold)';
            else this.el.style.filter = '';
        }
    }

    // åˆå§‹å°çŒ«
    cats.push(new MagicalCat());

    function updateCoins() {
        document.getElementById('coins').innerText = coins;
    }

    function throwFood() {
        const tx = Math.random() * (window.innerWidth - 100);
        const ty = Math.random() * (window.innerHeight - 100);
        const f = document.createElement('div');
        f.className = 'food'; f.innerText = 'ğŸŸ';
        f.style.left = tx + 'px'; f.style.top = ty + 'px';
        stage.appendChild(f);
        
        if(cats.length > 0) {
            cats[0].eat(tx, ty).then(() => {
                f.remove();
                coins += 5;
                updateCoins();
            });
        }
    }

    function changeScene() {
        if (coins >= 6) {
            coins -= 6;
            sceneIdx = (sceneIdx + 1) % scenes.length;
            const s = scenes[sceneIdx];
            stage.className = s.class;
            const deco = document.getElementById('deco-item');
            deco.innerText = s.icon;
            deco.className = `furniture ${s.decoClass}`;
            updateCoins();
            
            // å¦‚æœæ˜¯å§å®¤ï¼Œè®©çŒ«å’ªç¡è§‰
            if(s.name === 'å§å®¤') {
                cats.forEach(c => {
                    c.el.querySelector('.eye-l').style.height = '2px';
                    c.el.querySelector('.eye-r').style.height = '2px';
                });
            } else {
                cats.forEach(c => {
                    c.el.querySelector('.eye-l').style.height = '10px';
                    c.el.querySelector('.eye-r').style.height = '10px';
                });
            }
        }
    }

    function dressUp() {
        if(coins >= 6 && cats.length > 0) {
            coins -= 6;
            cats[0].toggleHat();
            updateCoins();
        }
    }

    function hatchEgg() {
        if(coins >= 12) {
            coins -= 12;
            cats.push(new MagicalCat());
            updateCoins();
        }
    }

    function playWand() {
        if(coins >= 2) {
            coins -= 2;
            updateCoins();
            cats.forEach(c => c.meow()); // è®©æ‰€æœ‰çŒ«å’ªå…´å¥‹è·³åŠ¨
        }
    }
</script>
</body>
</html>
