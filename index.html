<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>é¦‹å˜´çŒ«å’ªå¤§ä½œæˆ˜</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f8ff; /* æ·¡è“è‰²èƒŒæ™¯ */
            font-family: 'Microsoft YaHei', sans-serif;
            flex-direction: column;
        }
        canvas {
            border: 4px solid #FFB6C1; /* ç²‰è‰²è¾¹æ¡† */
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            background-color: #FFF;
            cursor: none; /* éšè—ç”»å¸ƒä¸Šçš„é¼ æ ‡æŒ‡é’ˆ */
        }
        #instructions {
            margin-top: 10px;
            color: #666;
        }
    </style>
</head>
<body>

<canvas id="gameCanvas" width="600" height="400"></canvas>
<p id="instructions">ç§»åŠ¨é¼ æ ‡æ§åˆ¶å°çŒ«ï¼Œæ¥ä½ğŸŸï¼Œèº²é¿ğŸ’£ï¼</p>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    let score = 0;
    let gameOver = false;

    // å°çŒ«å¯¹è±¡
    const cat = {
        x: canvas.width / 2,
        y: canvas.height - 50,
        size: 50,
        emoji: "ğŸ±"
    };

    // æ‰è½ç‰©å“æ•°ç»„
    let items = [];
    let spawnRate = 60; // ç”Ÿæˆé€Ÿç‡ (å¸§æ•°)
    let frameCount = 0;

    // ç›‘å¬é¼ æ ‡ç§»åŠ¨
    canvas.addEventListener('mousemove', (e) => {
        const rect = canvas.getBoundingClientRect();
        cat.x = e.clientX - rect.left - cat.size / 2;

        // é™åˆ¶å°çŒ«ä¸è¦è·‘å‡ºç”»å¸ƒè¾¹ç•Œ
        if (cat.x < 0) cat.x = 0;
        if (cat.x > canvas.width - cat.size) cat.x = canvas.width - cat.size;
    });

    // ç”Ÿæˆæ–°ç‰©å“
    function spawnItem() {
        const isBomb = Math.random() < 0.3; // 30%å‡ ç‡æ˜¯ç‚¸å¼¹
        items.push({
            x: Math.random() * (canvas.width - 30),
            y: -30,
            size: 30,
            speed: Math.random() * 3 + 2, // éšæœºé€Ÿåº¦
            type: isBomb ? 'bomb' : 'fish',
            emoji: isBomb ? "ğŸ’£" : "ğŸŸ"
        });
    }

    // æ¸¸æˆä¸»å¾ªç¯
    function gameLoop() {
        if (gameOver) return;

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // ç»˜åˆ¶èƒŒæ™¯è£…é¥° (ç®€å•çš„è‰åœ°)
        ctx.fillStyle = "#90EE90";
        ctx.fillRect(0, canvas.height - 20, canvas.width, 20);

        // ç”Ÿæˆç‰©å“
        frameCount++;
        if (frameCount % spawnRate === 0) {
            spawnItem();
            // éšç€æ—¶é—´æ¨ç§»åŠ å¿«ç”Ÿæˆé€Ÿåº¦ï¼Œå¢åŠ éš¾åº¦
            if (spawnRate > 20) spawnRate--;
        }

        // æ›´æ–°å’Œç»˜åˆ¶ç‰©å“
        for (let i = items.length - 1; i >= 0; i--) {
            items[i].y += items[i].speed;
            ctx.font = `${items[i].size}px Arial`;
            ctx.fillText(items[i].emoji, items[i].x, items[i].y);

            // ç¢°æ’æ£€æµ‹ (ç®€å•çš„çŸ©å½¢ç¢°æ’)
            if (
                items[i].y + items[i].size > cat.y &&
                items[i].x < cat.x + cat.size &&
                items[i].x + items[i].size > cat.x
            ) {
                if (items[i].type === 'fish') {
                    score += 10;
                    // æ¥åˆ°é±¼çš„ç‰¹æ•ˆæç¤º (ç®€å•é—ªçƒä¸€ä¸‹åˆ†æ•°é¢œè‰²)
                    ctx.fillStyle = "gold";
                } else {
                    score -= 20;
                    ctx.fillStyle = "red";
                }
                items.splice(i, 1); // ç§»é™¤ç‰©å“
            }
            // ç§»é™¤æ‰å‡ºå±å¹•çš„ç‰©å“
            else if (items[i].y > canvas.height) {
                items.splice(i, 1);
            }
        }

        // ç»˜åˆ¶å°çŒ«
        ctx.font = `${cat.size}px Arial`;
        ctx.fillText(cat.emoji, cat.x, cat.y + cat.size - 5);

        // ç»˜åˆ¶åˆ†æ•°
        ctx.fillStyle = "#333";
        ctx.font = "24px Arial";
        ctx.fillText("å¾—åˆ†: " + score, 20, 40);

        requestAnimationFrame(gameLoop);
    }

    // å¯åŠ¨æ¸¸æˆ
    gameLoop();

</script>

</body>
</html>
