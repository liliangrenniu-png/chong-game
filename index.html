<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ¢¦å¹»å–µçµï¼šé­”å…½å…»æˆç‰©è¯­</title>
    <style>
        :root {
            --cat-color: #FFB347;
            --wing-color: rgba(255, 255, 255, 0.6);
        }

        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: "Microsoft YaHei"; }

        /* åœºæ™¯å®¹å™¨ */
        #stage {
            width: 100vw;
            height: 100vh;
            position: relative;
            transition: 1s ease-in-out;
            background: #ffeaa7; /* é»˜è®¤å¨æˆ¿é¢œè‰² */
        }

        /* åœºæ™¯æ ·å¼ */
        .scene-kitchen { background: linear-gradient(135deg, #fab1a0, #ffeaa7) !important; }
        .scene-bathroom { background: linear-gradient(135deg, #74b9ff, #81ecec) !important; }
        .scene-bedroom { background: linear-gradient(135deg, #a29bfe, #6c5ce7) !important; }

        /* --- 3D æ„Ÿç«‹ä½“å°çŒ«ç»“æ„ --- */
        #cat-container {
            position: absolute;
            width: 120px;
            height: 120px;
            transition: left 2s linear, top 2s linear;
            cursor: pointer;
            z-index: 10;
        }

        .cat-sprite { position: relative; width: 100%; height: 100%; animation: wobble 0.6s infinite alternate; }

        .cat-wing { 
            position: absolute; font-size: 40px; top: -10px; opacity: 0.8;
            animation: flap 0.3s infinite;
        }
        .wing-l { left: -10px; transform: scaleX(-1); }
        .wing-r { right: -10px; }

        .cat-body { 
            position: absolute; width: 70px; height: 50px; 
            background: var(--cat-color); border-radius: 30px; 
            bottom: 20px; left: 25px; box-shadow: inset -5px -5px rgba(0,0,0,0.1);
        }

        .cat-head { 
            position: absolute; font-size: 60px; top: 0; left: 20px; 
            z-index: 2; filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.2));
        }

        .cat-tail {
            position: absolute; font-size: 30px; right: -5px; bottom: 30px;
            animation: wag 0.5s infinite;
        }

        /* åŠ¨ç”»åº“ */
        @keyframes wobble { from { transform: rotate(-5deg); } to { transform: rotate(5deg); } }
        @keyframes flap { from { top: -10px; } to { top: -20px; } }
        @keyframes wag { from { transform: rotate(0); } to { transform: rotate(30deg); } }

        /* é£Ÿç‰©ï¼šå°é±¼å¹² */
        .food {
            position: absolute; font-size: 40px; 
            animation: bounce 0.5s infinite; z-index: 5;
        }
        @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-10px); } }

        /* æ°”æ³¡ï¼ˆæµ´å®¤ä¸“ç”¨ï¼‰ */
        .bubble {
            position: absolute; background: rgba(255,255,255,0.4); 
            border-radius: 50%; pointer-events: none; animation: rise 2s forwards;
        }
        @keyframes rise { to { transform: translateY(-200px); opacity: 0; } }

        /* UI */
        #hud {
            position: absolute; top: 20px; left: 20px; z-index: 100;
            background: rgba(255,255,255,0.3); padding: 15px; border-radius: 20px; backdrop-filter: blur(10px);
        }
        .controls {
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
            display: flex; gap: 10px; z-index: 100;
        }
        button {
            padding: 12px 20px; border-radius: 50px; border: none; background: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2); cursor: pointer; font-weight: bold;
        }
        button:hover { background: #ffeaa7; }
    </style>
</head>
<body>

<div id="stage" class="scene-kitchen">
    <div id="hud">
        <div>âœ¨ æ¢¦å¹»é‡‘å¸: <span id="coins">0</span></div>
        <div>ğŸ“ å½“å‰åœºæ™¯: <span id="scene-text">æ¢¦å¹»å¨æˆ¿</span></div>
    </div>

    <div id="cat-container" style="left: 100px; top: 200px;">
        <div class="cat-sprite">
            <div class="cat-wing wing-l">ğŸ•Šï¸</div>
            <div class="cat-wing wing-r">ğŸ•Šï¸</div>
            <div class="cat-tail">ğŸˆ</div>
            <div class="cat-body"></div>
            <div class="cat-head" id="cat-emoji">ğŸ±</div>
        </div>
    </div>

    <div class="controls">
        <button onclick="goKitchen()">ğŸ³ å¨æˆ¿(å–‚é£Ÿ)</button>
        <button onclick="goBathroom()">ğŸ› æµ´å®¤(æ´—æ¾¡)</button>
        <button onclick="goBedroom()">ğŸŒ™ å§å®¤(ä¼‘æ¯)</button>
        <button onclick="doAction()">âœ¨ ç‰¹æ®Šäº’åŠ¨</button>
    </div>
</div>

<script>
    let coins = 0;
    let currentScene = 'kitchen';
    const cat = document.getElementById('cat-container');
    const stage = document.getElementById('stage');

    // è®©å°çŒ«è‡ªç”±èµ°åŠ¨
    function randomWalk() {
        if(currentScene === 'bedroom') return; // ç¡è§‰æ—¶ä¸èµ°åŠ¨
        const x = Math.random() * (window.innerWidth - 150);
        const y = Math.random() * (window.innerHeight - 200) + 100;
        cat.style.left = x + 'px';
        cat.style.top = y + 'px';
    }
    setInterval(randomWalk, 3000);

    // åœºæ™¯åˆ‡æ¢
    function goKitchen() {
        currentScene = 'kitchen';
        stage.className = 'scene-kitchen';
        document.getElementById('scene-text').innerText = "æ¢¦å¹»å¨æˆ¿";
        document.getElementById('cat-emoji').innerText = "ğŸ±";
    }

    function goBathroom() {
        currentScene = 'bathroom';
        stage.className = 'scene-bathroom';
        document.getElementById('scene-text').innerText = "æ¢¦å¹»æµ´å®¤";
        document.getElementById('cat-emoji').innerText = "ğŸ±â€ğŸ‘¤";
    }

    function goBedroom() {
        currentScene = 'bedroom';
        stage.className = 'scene-bedroom';
        document.getElementById('scene-text').innerText = "æ¢¦å¹»å§å®¤";
        document.getElementById('cat-emoji').innerText = "ğŸ˜´";
    }

    // æ ¸å¿ƒäº’åŠ¨åŠ¨ä½œ
    function doAction() {
        if (currentScene === 'kitchen') {
            // å–‚é±¼å¹²
            const fish = document.createElement('div');
            fish.className = 'food';
            fish.innerText = 'ğŸŸ';
            const fx = Math.random() * 80 + (parseFloat(cat.style.left));
            const fy = parseFloat(cat.style.top) + 50;
            fish.style.left = fx + 'px';
            fish.style.top = fy + 'px';
            stage.appendChild(fish);

            // çŒ«å’ªèµ°è¿‡å»â€œåƒâ€
            cat.style.left = (fx - 30) + 'px';
            setTimeout(() => {
                fish.remove();
                document.getElementById('cat-emoji').innerText = "ğŸ˜‹";
                coins += 10;
                document.getElementById('coins').innerText = coins;
                setTimeout(() => document.getElementById('cat-emoji').innerText = "ğŸ±", 1000);
            }, 1000);

        } else if (currentScene === 'bathroom') {
            // æ´—æ¾¡æ³¡æ³¡
            for(let i=0; i<10; i++) {
                const b = document.createElement('div');
                b.className = 'bubble';
                b.style.width = Math.random()*20+10+'px';
                b.style.height = b.style.width;
                b.style.left = (parseFloat(cat.style.left) + 50 + Math.random()*40) + 'px';
                b.style.top = (parseFloat(cat.style.top) + 50) + 'px';
                stage.appendChild(b);
                setTimeout(() => b.remove(), 2000);
            }
            document.getElementById('cat-emoji').innerText = "ğŸ›";
            coins += 5;
            document.getElementById('coins').innerText = coins;
        }
    }

    // ç‚¹å‡»çŒ«å’ªä¹Ÿèƒ½è·å¾—é‡‘å¸
    cat.onclick = () => {
        coins += 1;
        document.getElementById('coins').innerText = coins;
        cat.style.transform = 'translate(-50%, -50%) scale(1.2)';
        setTimeout(() => cat.style.transform = 'translate(-50%, -50%) scale(1)', 200);
    }
</script>
</body>
</html>
