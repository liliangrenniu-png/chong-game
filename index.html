<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é©¬å¡é¾™å–µçµï¼šæŠšæ‘¸ä¸å‘¼å™œ</title>
    <style>
        /* --- 1. é©¬å¡é¾™è‰²ç³»å®šä¹‰ --- */
        :root {
            --bg-1: #ffdde1; /* æ¨±èŠ±ç²‰ */
            --bg-2: #ee9ca7; /* èœœæ¡ƒç²‰ */
            --bg-3: #a7bfe8; /* å©´å„¿è“ */
            --bg-4: #6190e8; /* å¤©ç©ºè“ */
            --bubble: #fff5e6; /* å¥¶æ²¹ç™½ */
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden;
            font-family: "Mady Madi", "å¹¼åœ†", cursive; /* åœ†æ¶¦å­—ä½“ */
            cursor: url('https://cdn-icons-png.flaticon.com/32/10522/10522079.png'), auto; /* æ›¿æ¢ä¸ºçŒ«çˆªå…‰æ ‡ */
            user-select: none;
        }

        /* --- 2. åŠ¨æ€é©¬å¡é¾™èƒŒæ™¯ (CSS Animation) --- */
        #dynamic-bg {
            position: absolute; width: 200%; height: 200%;
            background: linear-gradient(300deg, var(--bg-1), var(--bg-3), var(--bg-2), var(--bg-4));
            background-size: 180% 180%;
            animation: gradient-flow 15s ease infinite;
            z-index: 0;
            left: -50%; top: -50%;
        }

        @keyframes gradient-flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* æ¼‚æµ®çš„äº‘æœµè£…é¥° */
        .cloud {
            position: absolute; background: rgba(255,255,255,0.4); border-radius: 50px;
            filter: blur(8px); animation: float-cloud 20s linear infinite; z-index: 1;
        }
        @keyframes float-cloud { from { transform: translateX(-200px); } to { transform: translateX(120vw); } }

        /* --- 3. æ ¸å¿ƒè§’è‰²ï¼šé«˜äº’åŠ¨å°çŒ« --- */
        #cat-container {
            position: absolute; left: 50%; top: 50%; 
            transform: translate(-50%, -50%);
            width: 280px; height: 280px; z-index: 10;
            transition: transform 0.1s; /* ç”¨äºé¼ æ ‡è·Ÿéšçš„å¾®åŠ¨ */
        }

        /* çŒ«å’ªä¸»ä½“ (æ‰‹ç»˜é£æ ¼ SVG ç»“æ„æ¨¡æ‹Ÿ) */
        .cat-body {
            position: relative; width: 100%; height: 100%;
            background: url('https://i.pinimg.com/originals/30/56/27/305627f12eb6e5595914615a6b7d2f4d.png') no-repeat center bottom;
            background-size: contain;
            filter: drop-shadow(0 10px 15px rgba(100,80,120,0.2));
            transform-origin: bottom center;
            transition: filter 0.3s;
        }

        /* äº¤äº’åé¦ˆï¼šæœå†»å¼¹åŠ› */
        .jelly-anim { animation: jelly 0.6s cubic-bezier(0.25, 1.5, 0.5, 1); }
        @keyframes jelly {
            0% { transform: scale(1, 1); }
            30% { transform: scale(1.25, 0.75) translateY(10px); }
            40% { transform: scale(0.75, 1.25) translateY(-20px); }
            50% { transform: scale(1.15, 0.85) translateY(0); }
            65% { transform: scale(0.95, 1.05) translateY(-5px); }
            75% { transform: scale(1.05, 0.95) translateY(0); }
            100% { transform: scale(1, 1); }
        }

        /* äº¤äº’åé¦ˆï¼šèˆ’æœå¾—å‘æŠ– */
        .purr-anim { animation: vibrate 0.3s linear infinite; }
        @keyframes vibrate { 0% { transform: rotate(0deg); } 25% { transform: rotate(1deg); } 75% { transform: rotate(-1deg); } 100% { transform: rotate(0deg); } }

        /* --- çœ¼ç› (å®ç°è§†çº¿è·Ÿéš) --- */
        .eyes-container {
            position: absolute; top: 110px; left: 50%; transform: translateX(-50%);
            width: 80px; height: 30px; display: flex; justify-content: space-between; z-index: 15;
        }
        .eye {
            width: 24px; height: 24px; background: #fff; border-radius: 50%; position: relative; overflow: hidden;
            box-shadow: inset 2px 2px 5px rgba(0,0,0,0.2);
        }
        .pupil {
            width: 14px; height: 14px; background: #333; border-radius: 50%; position: absolute; top: 5px; left: 5px;
            transition: 0.1s; /* è§†çº¿ç§»åŠ¨é€Ÿåº¦ */
        }
        .eye-closed { /* çœ¯çœ¼æ ·å¼ */
            height: 4px; top: 10px; background: #333; border-radius: 2px;
        }

        /* --- 4. ç²’å­ç‰¹æ•ˆ --- */
        .particle {
            position: absolute; pointer-events: none; z-index: 20;
            font-size: 24px; animation: float-up 1s ease-out forwards;
        }
        @keyframes float-up { 
            0% { transform: translate(0, 0) scale(0.5); opacity: 1; } 
            100% { transform: translate(var(--tx), -100px) scale(1.5) rotate(var(--r)); opacity: 0; } 
        }

        /* --- UI é¢æ¿ --- */
        #ui-panel {
            position: absolute; top: 30px; left: 50%; transform: translateX(-50%);
            background: rgba(255,255,255,0.8); backdrop-filter: blur(10px);
            padding: 10px 30px; border-radius: 50px;
            box-shadow: 0 5px 15px rgba(255,105,180, 0.2);
            border: 3px solid #fff; z-index: 100;
            font-size: 24px; color: #ff6b81; font-weight: bold;
            display: flex; gap: 10px; align-items: center;
        }
        .heart-icon { animation: heartbeat 1.5s infinite; }
        @keyframes heartbeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }

        /* æç¤ºè¯­ */
        #hint {
            position: absolute; bottom: 50px; width: 100%; text-align: center;
            color: #fff; text-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 18px; opacity: 0.8; animation: fade 2s infinite alternate;
        }
        @keyframes fade { from { opacity: 0.6; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div id="dynamic-bg"></div>
    <div id="clouds"></div>

    <div id="ui-panel">
        <span class="heart-icon">ğŸ’–</span> 
        <span id="love-score">0</span>
    </div>

    <div id="cat-container">
        <div class="cat-body" id="cat-visual">
            <div class="eyes-container">
                <div class="eye left"><div class="pupil"></div></div>
                <div class="eye right"><div class="pupil"></div></div>
            </div>
        </div>
    </div>

    <div id="hint">è¯•ç€åœ¨çŒ«çŒ«èº«ä¸Šæ»‘åŠ¨æŠšæ‘¸ï¼Œæˆ–è€…ç‚¹å‡»å®ƒï¼ğŸ”Š æ‰“å¼€å£°éŸ³</div>

<script>
    // --- ğŸ”Š éŸ³æ•ˆç®¡ç†å™¨ (ä½¿ç”¨ç¨³å®š CDN) ---
    const sounds = {
        meow: new Audio('https://cdn.pixabay.com/audio/2024/09/20/audio_512030f576.mp3'), // å–µ
        purr: new Audio('https://cdn.pixabay.com/audio/2022/10/30/audio_3310065756.mp3'), // å‘¼å™œ
        pop: new Audio('https://cdn.pixabay.com/audio/2022/03/15/audio_73147814b5.mp3') // å•µ
    };
    // é¢„åŠ è½½å¹¶è®¾ç½®éŸ³é‡
    sounds.meow.volume = 0.6;
    sounds.purr.volume = 0.4;
    sounds.pop.volume = 0.3;
    sounds.purr.loop = true; // å‘¼å™œå£°å¾ªç¯

    let score = 0;
    const catContainer = document.getElementById('cat-container');
    const catVisual = document.getElementById('cat-visual');
    const pupils = document.querySelectorAll('.pupil');
    const eyes = document.querySelectorAll('.eye');
    const scoreEl = document.getElementById('love-score');

    // --- ğŸ‘ï¸ è§†çº¿è·Ÿéšé€»è¾‘ ---
    document.addEventListener('mousemove', (e) => {
        const rect = catContainer.getBoundingClientRect();
        const catCenterX = rect.left + rect.width / 2;
        const catCenterY = rect.top + rect.height / 2;

        // è®¡ç®—é¼ æ ‡ç›¸å¯¹äºçŒ«ä¸­å¿ƒçš„è§’åº¦
        const angle = Math.atan2(e.clientY - catCenterY, e.clientX - catCenterX);
        // é™åˆ¶çœ¼çƒç§»åŠ¨è·ç¦»
        const distance = Math.min(6, Math.hypot(e.clientX - catCenterX, e.clientY - catCenterY) / 10);

        const moveX = Math.cos(angle) * distance;
        const moveY = Math.sin(angle) * distance;

        pupils.forEach(pupil => {
            pupil.style.transform = `translate(${moveX}px, ${moveY}px)`;
        });
    });

    // --- ğŸ‘† æ ¸å¿ƒäº¤äº’ï¼šç‚¹å‡»ï¼ˆSquishï¼‰ ---
    catContainer.addEventListener('mousedown', () => {
        // è§†è§‰åé¦ˆï¼šå‹æ‰
        catVisual.style.transform = 'scale(1.2, 0.8) translateY(10px)';
        playAudio(sounds.meow);
    });

    catContainer.addEventListener('mouseup', (e) => {
        // è§†è§‰åé¦ˆï¼šQå¼¹æ¢å¤
        catVisual.style.transform = 'scale(1, 1)';
        catVisual.classList.remove('jelly-anim');
        void catVisual.offsetWidth; // å¼ºåˆ¶é‡ç»˜
        catVisual.classList.add('jelly-anim');
        
        // ç²’å­çˆ†å‘
        spawnParticles(e.clientX, e.clientY, 5);
        addScore(5);
    });

    // --- ğŸ–ï¸ æ ¸å¿ƒäº¤äº’ï¼šæŠšæ‘¸ï¼ˆRubbingï¼‰ ---
    let isHovering = false;
    let rubDistance = 0;

    catContainer.addEventListener('mouseenter', () => { 
        isHovering = true; 
        document.body.style.cursor = "url('https://cdn-icons-png.flaticon.com/32/10522/10522079.png'), auto"; // ç¡®ä¿å…‰æ ‡
    });
    catContainer.addEventListener('mouseleave', () => { 
        isHovering = false; 
        stopPurring(); 
    });

    catContainer.addEventListener('mousemove', (e) => {
        if (!isHovering) return;
        
        // è®¡ç®—æŠšæ‘¸è·ç¦»
        rubDistance++;
        
        if (rubDistance > 10) { // æ¯ç§»åŠ¨ä¸€å®šè·ç¦»è§¦å‘ä¸€æ¬¡
            rubDistance = 0;
            startPurring();
            addScore(1);
            spawnParticles(e.clientX, e.clientY, 1);
            
            // æŠšæ‘¸æ—¶çœ¯çœ¼ç›
            eyes.forEach(eye => {
                eye.style.height = '4px'; // å˜æˆä¸€æ¡ç¼
                eye.style.top = '10px';
            });
        }
        
        // åœæ­¢ç§»åŠ¨ 200ms åççœ¼åœæ­¢å‘¼å™œ
        clearTimeout(window.stopRubTimer);
        window.stopRubTimer = setTimeout(() => {
            stopPurring();
        }, 200);
    });

    function startPurring() {
        if (sounds.purr.paused) sounds.purr.play().catch(()=>{});
        catVisual.classList.add('purr-anim'); // èº«ä½“æŠ–åŠ¨
    }

    function stopPurring() {
        sounds.purr.pause();
        catVisual.classList.remove('purr-anim');
        // çå¼€çœ¼ç›
        eyes.forEach(eye => {
            eye.style.height = '24px';
            eye.style.top = '0px';
        });
    }

    // --- ğŸ‰ ç²’å­ç³»ç»Ÿ ---
    const shapes = ['ğŸ’–', 'âœ¨', 'ğŸ­', 'ğŸŒ¸', 'â­'];
    function spawnParticles(x, y, count) {
        for(let i=0; i<count; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.innerText = shapes[Math.floor(Math.random() * shapes.length)];
            p.style.left = x + 'px';
            p.style.top = y + 'px';
            
            // éšæœºæ•£å°„å‚æ•°
            const tx = (Math.random() - 0.5) * 100 + 'px';
            const r = (Math.random() - 0.5) * 90 + 'deg';
            p.style.setProperty('--tx', tx);
            p.style.setProperty('--r', r);
            
            document.body.appendChild(p);
            playAudio(sounds.pop); // æ’­æ”¾å•µå•µå£°

            setTimeout(() => p.remove(), 1000);
        }
    }

    function addScore(val) {
        score += val;
        scoreEl.innerText = score;
        scoreEl.style.transform = 'scale(1.5)';
        setTimeout(() => scoreEl.style.transform = 'scale(1)', 100);
    }

    function playAudio(audioObj) {
        // é‡ç½®æ’­æ”¾è¿›åº¦ï¼Œå…è®¸å¿«é€Ÿè¿ç»­æ’­æ”¾
        audioObj.currentTime = 0;
        audioObj.play().catch(e => console.log("éœ€äº¤äº’åæ’­æ”¾éŸ³é¢‘"));
    }

    // --- â˜ï¸ è‡ªåŠ¨ç”Ÿæˆäº‘æœµ ---
    for(let i=0; i<5; i++) {
        const c = document.createElement('div');
        c.className = 'cloud';
        c.style.width = Math.random() * 100 + 100 + 'px';
        c.style.height = Math.random() * 40 + 30 + 'px';
        c.style.top = Math.random() * 80 + '%';
        c.style.animationDuration = Math.random() * 20 + 20 + 's';
        c.style.animationDelay = Math.random() * -20 + 's';
        document.getElementById('clouds').appendChild(c);
    }
</script>
</body>
</html>
