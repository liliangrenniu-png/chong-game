<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç»˜æ¢¦çŒ«çµï¼šé©¬å¡é¾™ä¹‹å»</title>
    <style>
        /* --- ğŸ­ é©¬å¡é¾™ç”œç‚¹è‰²ç›˜å®šä¹‰ --- */
        :root {
            --macaron-pink: #ffcce0;
            --macaron-blue: #cce5ff;
            --macaron-yellow: #fff5cc;
            --macaron-mint: #d9ffe6;
            --macaron-purple: #e6ccff;
            --text-color: #8c7a8b; /* æŸ”å’Œçš„æ·±ç°ç´«è‰²ï¼Œä»£æ›¿çº¯é»‘ */
            --ui-font: "Comic Sans MS", "å¹¼åœ†", "Microsoft YaHei", cursive, sans-serif; /* é€‰æ‹©åœ†æ¶¦å¯çˆ±çš„å­—ä½“ */
        }

        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: var(--macaron-pink); font-family: var(--ui-font); user-select: none; color: var(--text-color); }

        #stage { width: 100%; height: 100%; position: relative; overflow: hidden; }
        
        /* --- ğŸ° æ°›å›´å±‚ï¼šç³–éœœä¸æŸ”å…‰ --- */
        /* ç»™æ•´ä¸ªç”»é¢åŠ ä¸€å±‚æŸ”ç„¦å¥¶æ²¹æ»¤é•œ */
        .creamy-overlay {
            position: absolute; width: 100%; height: 100%; pointer-events: none; z-index: 30;
            background: radial-gradient(circle at center, transparent 30%, rgba(255, 245, 204, 0.4) 100%);
            mix-blend-mode: overlay;
            filter: blur(10px);
        }
        /* æ¼‚æµ®çš„ç³–æœç²’å­ */
        .candy-dust {
            position: absolute; width: 100%; height: 100%; pointer-events: none; z-index: 25;
            background-image: url('https://cdn.pixabay.com/photo/2018/04/18/17/43/bokeh-3331178_1280.jpg'); /* æŸ”å’Œçš„å½©è‰²å…‰æ–‘ */
            background-size: cover; opacity: 0.3; mix-blend-mode: screen;
            animation: slow-drift 50s linear infinite alternate;
        }

        /* --- ğŸ–¼ï¸ åœºæ™¯å®¹å™¨ (ä¿æŒè§†å·®ç»“æ„) --- */
        .scene-container { 
            width: 300%; height: 100%; display: flex; position: absolute; top: 0; left: 0; 
            transition: transform 1.2s cubic-bezier(0.34, 1.56, 0.64, 1); /* æ›´Qå¼¹çš„åˆ‡æ¢æ›²çº¿ */
        }
        .scene { position: relative; width: 33.333%; height: 100%; overflow: hidden; }

        /* æ‰‹ç»˜èƒŒæ™¯å±‚ - ç»Ÿä¸€å¤„ç†ä¸ºæŸ”å’Œçš„æ°´å½©æ„Ÿ */
        .bg-layer { 
            position: absolute; width: 110%; height: 110%; left: -5%; top: -5%; 
            background-size: cover; background-position: center; 
            transition: transform 1.2s ease-out;
            /* æ ¸å¿ƒï¼šé€šè¿‡æ»¤é•œå°†ç…§ç‰‡è½¬ä¸ºé©¬å¡é¾™æ‰‹ç»˜è‰²è°ƒ */
            filter: brightness(1.2) contrast(0.8) saturate(1.2) hue-rotate(0deg) blur(2px);
        }

        /* åœºæ™¯1ï¼šæ¨±èŠ±å¥¶æ²¹å±‹ (ç²‰è‰²è°ƒ) */
        .s0 .bg-layer { background-image: url('https://images.unsplash.com/photo-1528459199957-0ff28496a7f6?auto=format&fit=crop&w=1920&q=80'); filter: brightness(1.2) saturate(0.8) sepia(0.2) hue-rotate(320deg) blur(3px); }
        
        /* åœºæ™¯2ï¼šè–„è·ç³–æ£®æ— (ç»¿è“è°ƒ) */
        .s1 .bg-layer { background-image: url('https://images.unsplash.com/photo-1518144591331-17a5dd71c477?auto=format&fit=crop&w=1920&q=80'); filter: brightness(1.1) saturate(1.1) hue-rotate(160deg) blur(3px); }
        
        /* åœºæ™¯3ï¼šé¦™èŠ‹äº‘æœµæ¢¦å¢ƒ (ç´«è°ƒ) */
        .s2 .bg-layer { background-image: url('https://images.unsplash.com/photo-1536599018102-9f803c140fc1?auto=format&fit=crop&w=1920&q=80'); filter: brightness(1.3) saturate(0.9) hue-rotate(220deg) blur(4px); }

        /* --- ğŸ± ä¸»è§’ï¼šQå¼¹æ‰‹ç»˜å°ç…¤çƒ --- */
        .cute-cat-unit {
            position: absolute; width: 160px; height: 160px; cursor: url('https://cdn-icons-png.flaticon.com/32/2567/2567820.png'), auto; /* é¼ æ ‡å˜æˆå°çˆªå­ */ z-index: 50;
            
            /* --- æ ¸å¿ƒå‡çº§ï¼šæ›´æ¢ä¸ºè¶…å¯çˆ±çš„æ‰‹ç»˜ç´ æ --- */
            /* è¿™é‡Œä½¿ç”¨ä¸€ä¸ªæ›´Qç‰ˆã€çœ¼ç›æ›´å¤§çš„æ‰‹ç»˜é»‘çŒ«ç´ æ */
            background-image: url('https://i.pinimg.com/originals/5a/e0/9c/5ae09c68320a69f0d6633271d7c93e34.png'); 
            background-size: contain; background-repeat: no-repeat; background-position: bottom center;
            
            /* æŸ”å’Œçš„å½©è‰²é˜´å½± */
            filter: drop-shadow(0px 8px 10px rgba(100, 80, 120, 0.3)); 
            
            /* é»˜è®¤å‘¼å¸åŠ¨ç”» */
            animation: soft-breathe 2.5s ease-in-out infinite;
            transition: transform 0.3s, filter 0.3s, opacity 0.5s, left 1.5s cubic-bezier(0.25, 0.1, 0.25, 1), top 1.5s cubic-bezier(0.25, 0.1, 0.25, 1);
            transform-origin: bottom center; /* é”šç‚¹åœ¨åº•éƒ¨ï¼Œæ–¹ä¾¿åšæŒ¤å‹åŠ¨ç”» */
        }
        /* æ‚¬åœæ—¶ï¼šæœŸå¾…çš„å°çœ¼ç¥ */
        .cute-cat-unit:hover { 
            transform: scale(1.08) rotate(-2deg); 
            filter: drop-shadow(0px 10px 15px rgba(100, 80, 120, 0.4)) brightness(1.05); 
        }

        /* --- ğŸ® åŠ¨ç”»å®šä¹‰ --- */
        @keyframes slow-drift { 0% { background-position: 0% 0%; } 100% { background-position: 10% 10%; } }
        @keyframes soft-breathe { 0%, 100% { transform: scaleY(1) translateY(0); } 50% { transform: scaleY(1.03) translateY(-3px); } }
        
        /* æ ¸å¿ƒäº¤äº’åŠ¨ç”»ï¼šæœå†»èˆ¬çš„æŒ¤å‹å›å¼¹ */
        @keyframes jelly-jump { 
            0% { transform: scale(1, 1); }
            30% { transform: scale(1.25, 0.75) translateY(10px); } /* å‹æ‰ */
            50% { transform: scale(0.85, 1.15) translateY(-40px); } /* æ‹‰é•¿è·³èµ· */
            70% { transform: scale(1.05, 0.95) translateY(-10px); } /* è½åœ°ç¼“å†² */
            100% { transform: scale(1, 1) translateY(0); }
        }
        
        @keyframes candy-pop { 0% { transform: scale(0.5) rotate(0deg); opacity: 1; } 100% { transform: translate(var(--tx), var(--ty)) scale(0) rotate(var(--rot)); opacity: 0; } }

        /* --- ğŸª å¯çˆ±æ‰‹ç»˜é£ UI --- */
        #hud { position: absolute; top: 25px; left: 25px; z-index: 100; }
        .cookie-panel { 
            background: #fff0f5; /* é¥¼å¹²åº•è‰² */
            padding: 12px 28px; border-radius: 30px; color: var(--text-color); font-weight: 900; 
            box-shadow: 4px 4px 0px var(--macaron-pink), inset 2px 2px 5px rgba(255,255,255,0.8);
            border: 3px solid #ffb3d1;
            display: flex; align-items: center; gap: 12px; font-size: 20px;
        }

        #controls { position: absolute; bottom: 35px; width: 100%; display: flex; justify-content: center; gap: 25px; z-index: 100; }
        .macaron-btn { 
            width: 75px; height: 75px; border-radius: 50%; 
            background: radial-gradient(circle at 30% 30%, var(--macaron-yellow), #ffd1dc); /* ç«‹ä½“æ„Ÿæ¸å˜ */
            display: flex; align-items: center; justify-content: center; font-size: 36px; cursor: pointer; color: #fff;
            box-shadow: 0 6px 0 #ff99bb, 0 10px 15px rgba(0,0,0,0.1); 
            transition: all 0.15s cubic-bezier(0.34, 1.56, 0.64, 1); border: 4px solid white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        .macaron-btn:hover { transform: translateY(-4px); filter: brightness(1.05); }
        .macaron-btn:active { transform: translateY(4px); box-shadow: 0 0px 0 #ff99bb, inset 0 2px 5px rgba(0,0,0,0.1); }
        .btn-summon { background: radial-gradient(circle at 30% 30%, var(--macaron-mint), var(--macaron-blue)); box-shadow: 0 6px 0 #a1d9ff, 0 10px 15px rgba(0,0,0,0.1); }
        .btn-summon:active { box-shadow: 0 0px 0 #a1d9ff, inset 0 2px 5px rgba(0,0,0,0.1); }

        .candy-particle { position: absolute; z-index: 200; pointer-events: none; font-size: 24px; }
    </style>
</head>
<body>

<div id="stage">
    <div class="creamy-overlay"></div>
    <div class="candy-dust"></div>

    <div class="scene-container" id="world">
        <div class="scene s0"><div class="bg-layer"></div></div>
        <div class="scene s1"><div class="bg-layer"></div></div>
        <div class="scene s2"><div class="bg-layer"></div></div>
    </div>

    <div id="hud">
        <div class="cookie-panel">
            <span>ğŸ­</span> 
            <span>ç³–æœåŠ›: <span id="coin-txt">100</span></span>
        </div>
    </div>

    <div id="controls">
        <div class="macaron-btn" onclick="switchScene(-1)">ğŸ‘ˆ</div>
        <div class="macaron-btn btn-summon" style="font-size: 42px;" onclick="summonCat()">ğŸ¬</div>
        <div class="macaron-btn" onclick="switchScene(1)">ğŸ‘‰</div>
    </div>
</div>

<script>
    let coins = 100;
    let cats = [];
    let currentSceneIdx = 0;
    // é©¬å¡é¾™ç²’å­é¢œè‰²åº“
    const candyColors = ['#ffcce0', '#cce5ff', '#fff5cc', '#d9ffe6', '#e6ccff'];
    const candyShapes = ['ğŸŒ¸', 'â­', 'ğŸ©', 'ğŸ¬', 'âœ¨', 'ğŸ’–'];

    class CuteCat {
        constructor() {
            this.sceneLocation = currentSceneIdx;
            this.x = window.innerWidth * 0.2 + Math.random() * (window.innerWidth * 0.6);
            this.y = window.innerHeight * 0.4 + Math.random() * (window.innerHeight * 0.3); 
            this.createDOM();
            this.startAI();
        }

        createDOM() {
            this.el = document.createElement('div');
            this.el.className = 'cute-cat-unit';
            this.updatePositionAndVisibility();
            
            this.el.onclick = (e) => { e.stopPropagation(); this.interact(e); };
            document.getElementById('stage').appendChild(this.el);

            // Qå¼¹å…¥åœº
            this.el.style.opacity = 0;
            this.el.style.transform = 'scale(0.5, 1.5) translateY(50px)';
            setTimeout(() => {
                this.el.style.opacity = (this.sceneLocation === currentSceneIdx) ? 1 : 0;
                this.el.style.transform = 'scale(1, 1) translateY(0)';
            }, 50);
        }

        updatePositionAndVisibility() {
            // ç®€å•çš„é€è§†ç¼©æ”¾ï¼Œè®©çŒ«å’ªçœ‹èµ·æ¥èåˆåœ¨åœºæ™¯é‡Œ
            const perspectiveScale = 0.8 + (this.y / window.innerHeight) * 0.4;
            this.el.style.left = this.x - 80 + 'px';
            this.el.style.top = this.y - 140 + 'px';
            // åº”ç”¨é€è§†ç¼©æ”¾ï¼Œä½†ä¿ç•™æ—‹è½¬æ¥å£
            this.el.style.transform = `scale(${perspectiveScale}) rotate(0deg)`;
            
            const isVisible = (this.sceneLocation === currentSceneIdx);
            this.el.style.opacity = isVisible ? 1 : 0;
            this.el.style.pointerEvents = isVisible ? 'auto' : 'none';
        }

        interact(e) {
            coins += 10; updateUI();
            
            // --- æ ¸å¿ƒäº¤äº’å‡çº§ï¼šæœå†»èˆ¬çš„æŒ¤å‹å›å¼¹åŠ¨ç”» ---
            this.el.style.animation = 'none'; // å…ˆæ‰“æ–­å‘¼å¸åŠ¨ç”»
            // å¼ºåˆ¶é‡ç»˜
            void this.el.offsetWidth; 
            // åº”ç”¨æœå†»è·³è·ƒåŠ¨ç”»
            this.el.style.animation = 'jelly-jump 0.6s cubic-bezier(0.25, 1.5, 0.5, 1)';
            
            // çˆ†å‘å‡ºé©¬å¡é¾™ç³–æœç²’å­
            spawnCandyExplosion(e.clientX, e.clientY - 50);

            setTimeout(() => {
                // æ¢å¤å‘¼å¸åŠ¨ç”»
                this.el.style.animation = 'soft-breathe 2.5s ease-in-out infinite';
            }, 600);
        }

        startAI() {
            setInterval(() => {
                if (Math.random() > 0.65 && this.sceneLocation === currentSceneIdx) {
                    this.wander();
                }
            }, 3000 + Math.random() * 2500);
        }

        wander() {
            this.x += (Math.random() - 0.5) * 180;
            this.y += (Math.random() - 0.5) * 100;
            this.x = Math.max(100, Math.min(window.innerWidth - 100, this.x));
            this.y = Math.max(window.innerHeight * 0.4, Math.min(window.innerHeight - 150, this.y));
            this.updatePositionAndVisibility();
        }
    }

    function updateUI() { document.getElementById('coin-txt').innerText = coins; }

    function switchScene(dir) {
        currentSceneIdx = (currentSceneIdx + dir + 3) % 3;
        document.getElementById('world').style.transform = `translateX(-${currentSceneIdx * 33.333}%)`;
        
        document.querySelectorAll('.bg-layer').forEach((bg, idx) => {
            const relativePos = idx - currentSceneIdx;
            bg.style.transform = `translateX(${relativePos * 10}%) scale(1.05)`;
        });

        cats.forEach(cat => cat.updatePositionAndVisibility());
    }

    function summonCat() {
        if(coins >= 50) {
            coins -= 50; updateUI();
            cats.push(new CuteCat());
            spawnCandyExplosion(window.innerWidth/2, window.innerHeight/2 + 100);
        }
    }

    // ç”Ÿæˆé©¬å¡é¾™ç³–æœçˆ†ç‚¸ç‰¹æ•ˆ
    function spawnCandyExplosion(x, y) {
        for(let i=0; i<12; i++) {
            const candy = document.createElement('div');
            candy.className = 'candy-particle';
            candy.innerText = candyShapes[Math.floor(Math.random() * candyShapes.length)];
            candy.style.left = x + 'px'; candy.style.top = y + 'px';
            candy.style.color = candyColors[Math.floor(Math.random() * candyColors.length)];
            // éšæœºçˆ†ç‚¸æ–¹å‘å’Œæ—‹è½¬
            const tx = (Math.random() - 0.5) * 250 + 'px';
            const ty = (Math.random() - 0.8) * 250 + 'px'; // æ›´å¤šå‘ä¸Šç‚¸
            const rot = (Math.random() - 0.5) * 360 + 'deg';
            candy.style.setProperty('--tx', tx);
            candy.style.setProperty('--ty', ty);
            candy.style.setProperty('--rot', rot);
            candy.style.animation = `candy-pop ${0.8 + Math.random()*0.4}s ease-out forwards`;
            document.getElementById('stage').appendChild(candy);
            setTimeout(() => candy.remove(), 1200);
        }
    }

    cats.push(new CuteCat());
    updateUI();
    switchScene(0);
</script>
</body>
</html>
