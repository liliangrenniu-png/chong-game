<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å–µå‘œçš„ç™¾å˜è¡£æ©±ä¸ç¾é£ŸèŠ‚</title>
    <style>
        /* --- 1. ç”œç‚¹çº§å…¨å±€è®¾è®¡ --- */
        :root {
            --pink: #FFCDEA;
            --blue: #C3E0FF;
            --yellow: #FFF5BA;
            --text: #6B5B6B;
        }
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden;
            font-family: "å¹¼åœ†", "Rounded Mplus 1c", cursive;
            background-color: var(--pink);
            color: var(--text);
            user-select: none; 
            /* å¯çˆ±çš„å…‰æ ‡ */
            cursor: url('https://cdn-icons-png.flaticon.com/32/3468/3468377.png'), auto;
        }

        /* --- 2. å¯åˆ‡æ¢çš„å¯çˆ±èƒŒæ™¯ --- */
        #game-stage {
            position: relative; width: 100%; height: 100%;
            /* é»˜è®¤èƒŒæ™¯1ï¼šæ¸©é¦¨æˆ¿é—´ */
            background-image: url('https://img.freepik.com/free-vector/hand-drawn-kawaii-room-interior_23-2150654503.jpg');
            background-size: cover; background-position: center;
            transition: background-image 0.5s ease-in-out;
        }
        /* æŸ”å…‰é®ç½©å±‚ */
        .overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 240, 0.2); pointer-events: none;
        }

        /* --- 3. ä¸°å¯Œçš„é¡¶éƒ¨ UI --- */
        .top-container {
            position: absolute; top: 20px; width: 90%; left: 5%;
            display: flex; justify-content: space-between; align-items: flex-start; z-index: 100;
        }
        
        /* é‡‘å¸æ  */
        .coin-box {
            background: #FFF; padding: 8px 20px; border-radius: 30px;
            box-shadow: 0 6px 0 var(--yellow), 0 10px 15px rgba(0,0,0,0.1);
            font-weight: bold; font-size: 22px; display: flex; align-items: center;
            border: 3px solid var(--yellow); color: #F7B731;
        }

        /* å³ä¾§åŠŸèƒ½åŒºï¼šæ¢èƒŒæ™¯ + æ¢çŒ« */
        .right-tools { display: flex; flex-direction: column; gap: 15px; align-items: flex-end; }

        /* é€šç”¨å¯çˆ±æŒ‰é’®æ ·å¼ */
        .cute-btn {
            background: #FFF; padding: 10px; border-radius: 25px; cursor: pointer;
            box-shadow: 0 6px 0 #eee, 0 8px 15px rgba(0,0,0,0.1);
            border: 3px solid #fff; text-align: center; transition: 0.1s;
            font-weight: bold;
        }
        .cute-btn:active { transform: translateY(6px); box-shadow: 0 0 0 #eee; }
        
        /* åˆ‡æ¢èƒŒæ™¯æŒ‰é’® */
        #bg-switch-btn { background: var(--blue); box-shadow: 0 6px 0 #92bde7; color: white; font-size: 24px; width: 50px; height: 50px; display: flex; justify-content: center; align-items: center;}

        /* æ¢çŒ«å¤§æŒ‰é’® */
        #change-cat-btn {
            background: linear-gradient(135deg, #FF9A9E 0%, #FBC2EB 100%); color: white;
            box-shadow: 0 6px 0 #ff758c; padding: 10px 20px;
        }
        #change-cat-btn.disabled { filter: grayscale(1); opacity: 0.8; cursor: not-allowed; }

        /* --- 4. ä¸»è§’ï¼šè¶…è½¯èŒçŒ«å’ª --- */
        #cat-stage {
            position: absolute; left: 50%; bottom: 140px; transform: translateX(-50%);
            width: 300px; height: 300px; z-index: 10; cursor: pointer;
        }
        .cat-img {
            width: 100%; height: 100%; object-fit: contain;
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.15));
            transition: transform 0.2s cubic-bezier(0.25, 1.5, 0.5, 1); /* Qå¼¹æ•ˆæœ */
        }
        .cat-img:active { transform: scale(0.9, 1.1); } /* ç‚¹å‡»å‹æ‰ */

        /* --- 5. åº•éƒ¨å¤šåŠŸèƒ½æŒ‰é”®åŒº --- */
        #bottom-dock {
            position: absolute; bottom: 30px; width: 100%;
            display: flex; justify-content: center; gap: 15px; z-index: 100;
        }
        
        .dock-btn {
            width: 65px; height: 65px; border-radius: 22px; background: #fff;
            display: flex; font-size: 32px; align-items: center; justify-content: center;
            box-shadow: 0 6px 0 var(--pink), 0 10px 10px rgba(0,0,0,0.05);
            cursor: pointer; transition: 0.1s; border: 3px solid var(--pink); position: relative;
        }
        .dock-btn:active { transform: translateY(6px); box-shadow: 0 0 0 var(--pink); }

        /* é£Ÿç‰©èœå•å¼¹å‡ºå±‚ */
        #food-menu {
            position: absolute; bottom: 110px; left: 50%; transform: translateX(-50%) scale(0);
            background: #fff; padding: 15px; border-radius: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15); border: 4px solid var(--yellow);
            display: flex; gap: 15px; transition: 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            transform-origin: bottom center; opacity: 0; pointer-events: none;
        }
        #food-menu.show { transform: translateX(-50%) scale(1); opacity: 1; pointer-events: auto; }
        
        .food-item {
            width: 55px; height: 55px; background: var(--yellow); border-radius: 15px;
            display: flex; justify-content: center; align-items: center; font-size: 30px;
            cursor: pointer; transition: 0.2s;
        }
        .food-item:hover { transform: scale(1.1) rotate(5deg); background: #fff; }

        /* --- 6. ç‰¹æ•ˆ --- */
        .pop-text {
            position: absolute; font-weight: bold; color: var(--text); font-size: 24px;
            pointer-events: none; animation: floatUp 1s forwards; z-index: 200;
            text-shadow: 2px 2px 0 #fff;
        }
        @keyframes floatUp { 0% { transform: translateY(0) scale(0.8); opacity: 1; } 100% { transform: translateY(-80px) scale(1.2); opacity: 0; } }
        
        /* çƒŸé›¾ç‰¹æ•ˆ */
        .poof { position: absolute; font-size: 100px; animation: poofAnim 0.5s forwards; pointer-events: none; z-index: 20; left: 50%; top: 50%; transform: translate(-50%, -50%); }
        @keyframes poofAnim { 0% { opacity: 1; transform: translate(-50%, -50%) scale(0.5); } 100% { opacity: 0; transform: translate(-50%, -50%) scale(1.5); } }

    </style>
</head>
<body>

<div id="game-stage">
    <div class="overlay"></div>

    <div class="top-container">
        <div class="coin-box">
            ğŸ’° <span id="coin-count">0</span>
        </div>
        <div class="right-tools">
            <div id="bg-switch-btn" class="cute-btn" onclick="switchBackground()">ğŸ¨</div>
            <div id="change-cat-btn" class="cute-btn disabled" onclick="changeCatShape()">
                âœ¨ 10é‡‘å¸æ¢é€ å‹
            </div>
        </div>
    </div>

    <div id="cat-stage" onclick="petCat(event)">
        <img id="cat-img" class="cat-img" src="" alt="Cute Cat">
    </div>

    <div id="food-menu">
        <div class="food-item" onclick="feed('ğŸŸ', 3)">ğŸŸ</div>
        <div class="food-item" onclick="feed('ğŸ©', 5)">ğŸ©</div>
        <div class="food-item" onclick="feed('ğŸ¦', 4)">ğŸ¦</div>
        <div class="food-item" onclick="feed('ğŸ“', 2)">ğŸ“</div>
    </div>

    <div id="bottom-dock">
        <div class="dock-btn" style="background: #FFEFD5;" onclick="toggleFoodMenu()">ğŸ´</div>
        <div class="dock-btn" style="background: #E0F7FA;" onclick="playToy('ğŸ§¶', 4)">ğŸ§¶</div>
        <div class="dock-btn" style="background: #E1BEE7;" onclick="playToy('ğŸ§¸', 5)">ğŸ§¸</div>
        <div class="dock-btn" style="background: #C8E6C9;" onclick="playToy('ğŸ›', 6)">ğŸ›</div>
    </div>

</div>

<script>
    let coins = 0;
    
    // --- ç´ æåº“ ---
    // å¯çˆ±çŒ«å’ªåº“ (åœ†æ»šæ»šçš„å¡é€šé£)
    const cats = [
        'https://cdn-icons-png.flaticon.com/512/4520/4520474.png', // èƒ–ä¸‰èŠ±
        'https://cdn-icons-png.flaticon.com/512/4520/4520489.png', // èƒ–æ©˜
        'https://cdn-icons-png.flaticon.com/512/4520/4520502.png', // èƒ–ç°
        'https://cdn-icons-png.flaticon.com/512/4520/4520518.png', // èƒ–å¥¶ç‰›
        'https://cdn-icons-png.flaticon.com/512/4520/4520467.png'  // èƒ–ç™½
    ];
    let currentCatIdx = 0;

    // å¯çˆ±èƒŒæ™¯åº“
    const backgrounds = [
        'https://img.freepik.com/free-vector/hand-drawn-kawaii-room-interior_23-2150654503.jpg', // æˆ¿é—´
        'https://img.freepik.com/free-vector/hand-drawn-kawaii-sky-background_23-2150633476.jpg', // äº‘ç«¯
        'https://img.freepik.com/free-vector/hand-drawn-kawaii-garden-background_23-2150633480.jpg' // èŠ±å›­
    ];
    let currentBgIdx = 0;

    // DOM å…ƒç´ 
    const catImg = document.getElementById('cat-img');
    const coinLabel = document.getElementById('coin-count');
    const changeBtn = document.getElementById('change-cat-btn');
    const foodMenu = document.getElementById('food-menu');
    const stage = document.getElementById('game-stage');

    // åˆå§‹åŒ–
    function init() {
        catImg.src = cats[currentCatIdx];
        updateUI();
    }

    // æ›´æ–°ç•Œé¢
    function updateUI() {
        coinLabel.innerText = coins;
        if (coins >= 10) {
            changeBtn.classList.remove('disabled');
            changeBtn.innerHTML = "âœ¨ ç‚¹å‡»æ¢é€ å‹!";
        } else {
            changeBtn.classList.add('disabled');
            changeBtn.innerHTML = `âœ¨ 10é‡‘å¸æ¢é€ å‹`;
        }
    }

    // å¢åŠ é‡‘å¸
    function addCoins(amount, x, y) {
        coins += amount;
        updateUI();
        spawnPopText(`+${amount} ğŸ’°`, x, y);
    }

    // --- åŠŸèƒ½1: åˆ‡æ¢èƒŒæ™¯ (æŒ‰é”®) ---
    function switchBackground() {
        currentBgIdx = (currentBgIdx + 1) % backgrounds.length;
        stage.style.backgroundImage = `url('${backgrounds[currentBgIdx]}')`;
        spawnPopText('ğŸ¨ åœºæ™¯åˆ‡æ¢!', window.innerWidth/2, window.innerHeight/2);
    }

    // --- åŠŸèƒ½2: é‡‘å¸æ¢çŒ« (æ ¸å¿ƒç©æ³•) ---
    function changeCatShape() {
        if (coins < 10) return;
        coins -= 10;
        updateUI();

        // ç‰¹æ•ˆ
        const poof = document.createElement('div'); poof.className = 'poof'; poof.innerText = 'ğŸ’¨';
        document.getElementById('cat-stage').appendChild(poof); setTimeout(() => poof.remove(), 500);

        // æ¢ä¸€åªæ–°çŒ«
        let newIdx;
        do { newIdx = Math.floor(Math.random() * cats.length); } while (newIdx === currentCatIdx);
        currentCatIdx = newIdx;
        
        catImg.style.transform = 'scale(0)';
        setTimeout(() => {
            catImg.src = cats[currentCatIdx];
            catImg.style.transform = 'scale(1)';
            spawnPopText('âœ¨ æ–°é€ å‹ Get!', window.innerWidth/2, window.innerHeight/2 + 100);
        }, 200);
    }

    // --- åŠŸèƒ½3: æŠšæ‘¸äº’åŠ¨ ---
    function petCat(e) {
        addCoins(1, e.clientX, e.clientY);
        spawnPopText(['â¤ï¸', 'å‘¼å™œå™œ~', 'å¥½è½¯!'][Math.floor(Math.random()*3)], e.clientX, e.clientY - 50);
    }

    // --- åŠŸèƒ½4: é£Ÿç‰©èœå• ---
    function toggleFoodMenu() {
        foodMenu.classList.toggle('show');
    }

    // å–‚é£ŸåŠ¨ä½œ
    function feed(foodIcon, reward) {
        foodMenu.classList.remove('show'); // å…³é—­èœå•
        addCoins(reward, window.innerWidth/2, window.innerHeight/2);
        spawnPopText(`${foodIcon} å¥½åƒ!`, window.innerWidth/2, window.innerHeight/2 - 80);
        
        // çŒ«å’ªå¼€å¿ƒè·³åŠ¨
        catImg.style.transform = 'translateY(-30px) rotate(10deg) scale(1.1)';
        setTimeout(() => catImg.style.transform = 'translateY(0) rotate(0) scale(1)', 400);
    }

    // --- åŠŸèƒ½5: å…¶ä»–ç©å…·/æ´—æ¾¡æŒ‰é”® ---
    function playToy(toyIcon, reward) {
        foodMenu.classList.remove('show');
        addCoins(reward, window.innerWidth/2, window.innerHeight/2);
        spawnPopText(`${toyIcon} å¥½ç©!`, window.innerWidth/2, window.innerHeight/2 - 80);
        
        // ä¸åŒçš„äº’åŠ¨åŠ¨ç”»
        if(toyIcon === 'ğŸ›') {
             spawnPopText('ğŸ«§ ğŸ«§ ğŸ«§', window.innerWidth/2, window.innerHeight/2);
             catImg.style.filter = 'brightness(1.2)';
             setTimeout(() => catImg.style.filter = '', 1000);
        } else {
             catImg.style.transform = 'translateX(-20px) rotate(-5deg)';
             setTimeout(() => catImg.style.transform = 'translateX(20px) rotate(5deg)', 200);
             setTimeout(() => catImg.style.transform = 'translate(0) rotate(0)', 400);
        }
    }

    // å·¥å…·: æ¼‚æµ®æ–‡å­—ç‰¹æ•ˆ
    function spawnPopText(text, x, y) {
        const p = document.createElement('div'); p.className = 'pop-text'; p.innerText = text;
        p.style.left = x + 'px'; p.style.top = y + 'px';
        document.body.appendChild(p); setTimeout(() => p.remove(), 1000);
    }

    init();
</script>
</body>
</html>
