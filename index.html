<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å¹»å…½èµ·æºï¼šåŠ¨ç”»æ–°ä¸–ç•Œ</title>
    <style>
        :root {
            --magic-glow: 0 0 20px rgba(255, 255, 255, 0.4), inset 0 0 20px rgba(255, 255, 255, 0.2);
            --primary-color: #6c5ce7;
        }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: "Segoe UI", cursive; background: #0c0c1d; color: white; }

        /* --- æ²‰æµ¸å¼åŠ¨æ€åœºæ™¯ --- */
        #viewport { width: 100vw; height: 100vh; position: relative; overflow: hidden; }
        .scene { 
            width: 100%; height: 100%; position: absolute; top: 0; left: 0; 
            transition: transform 1s cubic-bezier(0.68, -0.55, 0.265, 1.55); /* å¼¹è·³åˆ‡æ¢æ•ˆæœ */
            display: flex; justify-content: center; align-items: center;
            background-size: cover;
        }
        /* èƒŒæ™¯ç²’å­å±‚ */
        .particles { position: absolute; width: 100%; height: 100%; background-image: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 50px 50px; animation: drift 20s linear infinite; pointer-events: none; }
        @keyframes drift { from { background-position: 0 0; } to { background-position: 100px 50px; } }

        /* åœºæ™¯ç‰¹è‰² */
        .s-magic-room { background: linear-gradient(135deg, #240b36, #c31432); }
        .s-magic-room::after { content: 'ğŸ”®'; position: absolute; font-size: 200px; opacity: 0.1; bottom: -50px; left: -50px; }
        
        .s-garden { background: linear-gradient(135deg, #134e5e, #71b280); }
        .s-garden::after { content: 'ğŸ„'; position: absolute; font-size: 180px; opacity: 0.2; bottom: 20px; right: 20px; filter: hue-rotate(90deg); }

        .s-sky-temple { background: linear-gradient(135deg, #00b4db, #0083b0); }
        .s-sky-temple::after { content: 'â˜ï¸'; position: absolute; font-size: 250px; opacity: 0.3; top: 50px; left: 50%; transform: translateX(-50%); }

        /* --- é«˜çº§é­”å…½æ„é€  --- */
        .beast-wrapper {
            position: absolute; width: 200px; height: 200px;
            cursor: pointer; z-index: 50; transition: all 0.8s ease-out;
            filter: drop-shadow(0 10px 15px rgba(0,0,0,0.3));
        }
        .beast-wrapper:hover { transform: scale(1.05); }

        /* æ ¸å¿ƒåŠ¨ç”»å®¹å™¨ */
        .beast-animator { 
            position: relative; width: 100%; height: 100%; 
            animation: hover-breath 4s infinite ease-in-out; 
        }

        /* èº«ä½“ï¼šå¤æ‚çš„æ¸å˜ä¸çº¹ç† */
        .b-body { 
            position: absolute; width: 120px; height: 90px; 
            border-radius: 60px 70px 50px 50px; bottom: 40px; left: 40px;
            background: var(--skin-gradient, linear-gradient(to bottom right, #a1c4fd, #c2e9fb));
            box-shadow: var(--magic-glow), inset -5px -5px 15px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        /* çº¹ç†è¦†ç›–å±‚ */
        .b-texture { position: absolute; width: 100%; height: 100%; opacity: 0.3; mix-blend-mode: overlay; }

        .b-head { 
            position: absolute; width: 90px; height: 85px; 
            background: var(--skin-gradient);
            border-radius: 50%; top: 10px; left: 55px; z-index: 10;
            box-shadow: var(--magic-glow), inset 5px 5px 10px rgba(255,255,255,0.5);
        }

        /* å·®å¼‚åŒ–éƒ¨ä»¶ */
        .b-wing { position: absolute; font-size: 80px; top: -20px; z-index: 1; filter: drop-shadow(0 0 10px currentColor); }
        .wing-l { left: -10px; transform: scaleX(-1) rotate(-10deg); animation: flap-l 1s infinite alternate; }
        .wing-r { right: -10px; transform: rotate(10deg); animation: flap-r 1s infinite alternate; }

        .b-horn { position: absolute; font-size: 40px; top: -15px; z-index: 15; filter: contrast(1.5); }
        .horn-l { left: 10px; transform: rotate(-20deg); }
        .horn-r { right: 10px; transform: rotate(20deg) scaleX(-1); }

        .b-face { position: absolute; top: 35px; left: 50%; transform: translateX(-50%); font-size: 24px; }

        /* --- åŠ¨ç”»å®šä¹‰ --- */
        @keyframes hover-breath { 0%, 100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-15px) scale(1.03); } }
        @keyframes flap-l { to { transform: scaleX(-1) rotate(10deg) translateY(-10px); } }
        @keyframes flap-r { to { transform: rotate(-10deg) translateY(-10px); } }
        @keyframes happy-wiggle { 0%, 100% { transform: rotate(0) scale(1.2); } 25% { transform: rotate(-10deg) scale(1.2); } 75% { transform: rotate(10deg) scale(1.2); } }

        /* --- UI è®¾è®¡ --- */
        #hud { position: absolute; top: 20px; left: 20px; z-index: 100; display: flex; gap: 10px; }
        .glass-panel { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); padding: 10px 20px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.2); font-weight: bold; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }

        #dock { position: absolute; bottom: 30px; width: 100%; display: flex; justify-content: center; gap: 20px; z-index: 100; }
        .big-btn { 
            width: 70px; height: 70px; border-radius: 25px; background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            display: flex; align-items: center; justify-content: center; font-size: 35px; cursor: pointer;
            box-shadow: 0 10px 20px rgba(108, 92, 231, 0.3); transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); border: none; outline: none;
        }
        .big-btn:hover { transform: translateY(-10px) scale(1.1); filter: brightness(1.2); }
        .big-btn:active { transform: scale(0.9); }
    </style>
</head>
<body>

<div id="viewport">
    <div id="s0" class="scene s-magic-room" style="transform: translateX(0%)">
        <div class="particles"></div>
    </div>
    <div id="s1" class="scene s-garden" style="transform: translateX(100%)">
        <div class="particles"></div>
    </div>
    <div id="s2" class="scene s-sky-temple" style="transform: translateX(200%)">
        <div class="particles"></div>
    </div>

    <div id="hud">
        <div class="glass-panel">ğŸ’ é­”æ™¶: <span id="coin-txt">50</span></div>
        <div class="glass-panel">ğŸ¦„ é­”å…½æ•°: <span id="beast-txt">1</span></div>
    </div>

    <div id="dock">
        <button class="big-btn" onclick="prevScene()">â—€ï¸</button>
        <button class="big-btn" style="background: linear-gradient(135deg, #00b09b, #96c93d);" onclick="throwTreat()">ğŸ¥©</button>
        <button class="big-btn" style="background: linear-gradient(135deg, #ff00cc, #333399); font-size: 45px;" onclick="hatch()">ğŸ¥š</button>
        <button class="big-btn" onclick="nextScene()">â–¶ï¸</button>
    </div>
</div>

<script>
    let coins = 50;
    let beasts = [];
    let sceneIdx = 0;

    // é­”å…½åŸºå› åº“
    const DNA = {
        types: [
            { name: 'é¾™çµ', skin: 'linear-gradient(to br, #434343, #000000)', wing: 'ğŸ²', horn: 'ğŸ˜ˆ', texture: 'radial-gradient(circle at 50% 50%, transparent 50%, rgba(0,0,0,0.4) 50%)', color: '#ff3f34' },
            { name: 'ä»™å­', skin: 'linear-gradient(to br, #ff9a9e, #fad0c4)', wing: 'ğŸ¦‹', horn: 'ğŸŒ¸', texture: 'linear-gradient(45deg, transparent 45%, rgba(255,255,255,0.3) 45%, rgba(255,255,255,0.3) 55%, transparent 55%)', color: '#ff9ff3' },
            { name: 'æµ·å¦–', skin: 'linear-gradient(to br, #00c6fb, #005bea)', wing: 'ğŸ¦ˆ', horn: 'ğŸš', texture: '', color: '#54a0ff' },
            { name: 'å…‰çµ', skin: 'linear-gradient(to br, #f6d365, #fda085)', wing: 'ğŸ•Šï¸', horn: 'âœ¨', texture: '', color: '#feca57' }
        ],
        faces: ['âš«â€¿âš«', 'â—•â€¿â—•', '>â€¿<', 'UwU']
    };

    class Beast {
        constructor() {
            this.x = Math.random() * (window.innerWidth - 250);
            this.y = Math.random() * (window.innerHeight - 300) + 100;
            // éšæœºåŸºå› 
            this.gene = DNA.types[Math.floor(Math.random() * DNA.types.length)];
            this.face = DNA.faces[Math.floor(Math.random() * DNA.faces.length)];
            this.render();
            this.moveAI();
        }

        render() {
            this.el = document.createElement('div');
            this.el.className = 'beast-wrapper';
            this.el.style.setProperty('--skin-gradient', this.gene.skin);
            this.el.style.color = this.gene.color; // ç”¨äºç¿…è†€å‘å…‰é¢œè‰²
            this.el.innerHTML = `
                <div class="beast-animator">
                    <div class="b-wing wing-l">${this.gene.wing}</div>
                    <div class="b-wing wing-r">${this.gene.wing}</div>
                    <div class="b-body">
                        <div class="b-texture" style="background-image: ${this.gene.texture}"></div>
                    </div>
                    <div class="b-head">
                        <div class="b-horn horn-l">${this.gene.horn}</div>
                        <div class="b-horn horn-r">${this.gene.horn}</div>
                        <div class="b-face">${this.face}</div>
                    </div>
                </div>
            `;
            this.el.onclick = () => this.happy();
            document.getElementById('viewport').appendChild(this.el);
            this.updatePos();
        }

        updatePos() {
            this.el.style.left = this.x + 'px';
            this.el.style.top = this.y + 'px';
        }

        happy() {
            coins += 5; updateUI();
            const animator = this.el.querySelector('.beast-animator');
            animator.style.animation = 'happy-wiggle 0.6s ease-in-out';
            setTimeout(() => animator.style.animation = 'hover-breath 4s infinite ease-in-out', 600);
            this.spawnMagic(this.gene.horn);
        }

        spawnMagic(icon) {
            const m = document.createElement('div');
            m.innerText = icon; m.style.position = 'absolute'; m.style.left = this.x+50+'px'; m.style.top = this.y+'px'; m.style.fontSize = '40px'; m.style.animation = 'drift 1s forwards';
            document.getElementById('viewport').appendChild(m);
            setTimeout(() => m.remove(), 1000);
        }

        moveAI() {
            setInterval(() => {
                this.x += (Math.random() - 0.5) * 300;
                this.y += (Math.random() - 0.5) * 150;
                this.x = Math.max(50, Math.min(window.innerWidth - 250, this.x));
                this.y = Math.max(100, Math.min(window.innerHeight - 250, this.y));
                this.updatePos();
            }, 4000);
        }
    }

    // åˆå§‹å¬å”¤
    beasts.push(new Beast()); updateUI();

    function updateUI() {
        document.getElementById('coin-txt').innerText = coins;
        document.getElementById('beast-txt').innerText = beasts.length;
    }

    function slide(dir) {
        sceneIdx = (sceneIdx + dir + 3) % 3;
        [0,1,2].forEach(i => {
            document.getElementById('s'+i).style.transform = `translateX(${(i - sceneIdx)*100}%) scale(${i===sceneIdx?1:0.8})`;
            document.getElementById('s'+i).style.opacity = i===sceneIdx?1:0.5;
        });
    }
    function nextScene() { slide(1); }
    function prevScene() { slide(-1); }

    function hatch() {
        if(coins >= 20) {
            coins -= 20;
            beasts.push(new Beast());
            updateUI();
            document.querySelector('.big-btn[onclick="hatch()"]').style.animation = 'happy-wiggle 0.5s';
            setTimeout(() => document.querySelector('.big-btn[onclick="hatch()"]').style.animation = '', 500);
        }
    }

    function throwTreat() {
        if(coins >= 5 && beasts.length > 0) {
            coins -= 5; updateUI();
            const meat = document.createElement('div');
            meat.innerText = 'ğŸ–'; meat.style.position='absolute'; meat.style.fontSize='50px'; meat.style.left=window.innerWidth/2+'px'; meat.style.top=window.innerHeight/2+'px'; meat.style.transition='all 0.8s';
            document.getElementById('viewport').appendChild(meat);
            
            const targetBeast = beasts[Math.floor(Math.random()*beasts.length)];
            setTimeout(() => {
                meat.style.left = targetBeast.x + 80 + 'px';
                meat.style.top = targetBeast.y + 80 + 'px';
                meat.style.transform = 'scale(0.5)';
                setTimeout(() => { meat.remove(); targetBeast.happy(); }, 800);
            }, 100);
        }
    }
</script>
</body>
</html>
