<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>èƒ–çŒ«é£è¡Œè®°ï¼šäº‘ç«¯è¿·å®«</title>
    <style>
        /* --- 1. æ¢¦å¹»èƒŒæ™¯ --- */
        body {
            margin: 0; padding: 0;
            background: linear-gradient(180deg, #a1c4fd 0%, #c2e9fb 100%);
            height: 100vh; width: 100vw;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-family: "Mady Madi", cursive, sans-serif;
            overflow: hidden; touch-action: none;
        }

        /* --- 2. è¿·å®«å®¹å™¨ --- */
        #game-board {
            position: relative;
            width: 350px; height: 350px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 4px solid #fff;
            display: grid;
            /* 10x10 ç½‘æ ¼ */
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(10, 1fr);
        }

        /* --- 3. è¿·å®«å…ƒç´  --- */
        /* å¢™å£ï¼šå˜æˆäº†äº‘æœµ */
        .wall {
            background-color: #fff;
            border-radius: 12px;
            box-shadow: inset 0 -3px 5px rgba(0,0,0,0.05);
            position: relative;
        }
        .wall::after {
            content: 'â˜ï¸'; font-size: 20px;
            position: absolute; left: 50%; top: 50%;
            transform: translate(-50%, -50%);
            opacity: 0.7;
        }

        /* åœ°æ¿ï¼šç©ºæ°” */
        .path { }

        /* ç»ˆç‚¹ï¼šå¤§é¸¡è…¿ */
        .goal {
            position: relative;
            display: flex; justify-content: center; align-items: center;
        }
        .goal::before {
            content: 'ğŸ—'; font-size: 28px;
            animation: float-food 1s infinite alternate;
            filter: drop-shadow(0 0 5px gold);
        }

        /* --- 4. ä¸»è§’ï¼šèƒ–ä¹ä¹çš„é£è¡Œé»‘çŒ« --- */
        #player {
            width: 35px; height: 35px;
            position: absolute; z-index: 10;
            transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1); /* Qå¼¹ç§»åŠ¨ */
            pointer-events: none;
        }

        /* èº«ä½“ï¼šåœ†æ»šæ»šçš„é»‘ç…¤çƒ */
        .cat-body {
            width: 100%; height: 80%;
            background: #2d3436; /* è½¯é»‘è‰² */
            border-radius: 50%; /* åœ†å½¢ */
            position: absolute; bottom: 0;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
            display: flex; justify-content: center;
        }
        
        /* è‚šå­ï¼šç°è‰²çš„åœ†è‚šçš®ï¼Œæ˜¾ç¤ºåƒé¥±äº† */
        .cat-belly {
            width: 60%; height: 50%;
            background: #636e72;
            border-radius: 50%;
            position: absolute; bottom: 5px;
        }

        /* çœ¼ç›ï¼šå¤§å¤§çš„ */
        .cat-eyes {
            width: 100%; position: absolute; top: 8px;
            display: flex; justify-content: space-around; padding: 0 6px; box-sizing: border-box;
        }
        .eye { width: 8px; height: 8px; background: white; border-radius: 50%; position: relative; }
        .pupil { width: 4px; height: 4px; background: black; border-radius: 50%; position: absolute; right: 1px; top: 2px; }

        /* ç¿…è†€ï¼šç™½è‰²ï¼Œä¸åœæ‰‡åŠ¨ */
        .cat-wings { width: 100%; position: absolute; top: 5px; z-index: -1; }
        .wing {
            width: 15px; height: 10px; background: rgba(255,255,255,0.9);
            position: absolute; border-radius: 50%;
            animation: flap 0.2s infinite alternate;
        }
        .wing.left { left: -8px; transform-origin: right center; }
        .wing.right { right: -8px; transform-origin: left center; }

        /* åŠ¨ç”» */
        @keyframes flap { from { transform: rotate(0deg) scaleY(1); } to { transform: rotate(-20deg) scaleY(0.8); } }
        @keyframes float-food { from { transform: translateY(0); } to { transform: translateY(-5px); } }
        @keyframes eat-anim { 0% { transform: scale(1); } 50% { transform: scale(1.5); } 100% { transform: scale(1); } }

        /* --- 5. æ§åˆ¶å™¨ --- */
        .controls {
            margin-top: 20px;
            display: grid;
            grid-template-columns: 60px 60px 60px;
            grid-template-rows: 60px 60px;
            gap: 10px;
        }
        .btn {
            width: 60px; height: 60px;
            background: rgba(255,255,255,0.6);
            border-radius: 15px; border: 2px solid #fff;
            font-size: 24px; cursor: pointer;
            display: flex; justify-content: center; align-items: center;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }
        .btn:active { transform: translateY(2px); box-shadow: none; background: white; }
        
        .up { grid-column: 2; grid-row: 1; }
        .left { grid-column: 1; grid-row: 2; }
        .down { grid-column: 2; grid-row: 2; }
        .right { grid-column: 3; grid-row: 2; }

        /* èƒœåˆ©æç¤º */
        #win-msg {
            position: absolute; top: 10%;
            background: #fff; padding: 10px 20px; border-radius: 20px;
            font-size: 20px; color: #ff6b81; font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: none; animation: pop 0.5s;
        }
        @keyframes pop { 0% { transform: scale(0); } 70% { transform: scale(1.2); } 100% { transform: scale(1); } }

    </style>
</head>
<body>

    <h2 style="color: #fff; text-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 10px;">â˜ï¸ èƒ–çŒ«é£è¡Œè¿·å®« â˜ï¸</h2>
    
    <div id="win-msg">Yummy! åƒåˆ°äº†! ğŸ—</div>

    <div id="game-board">
        <div id="player" style="transform: translate(0px, 0px);">
            <div class="cat-wings">
                <div class="wing left"></div>
                <div class="wing right" style="animation-delay: 0.1s"></div>
            </div>
            <div class="cat-body">
                <div class="cat-belly"></div>
                <div class="cat-eyes">
                    <div class="eye"><div class="pupil"></div></div>
                    <div class="eye"><div class="pupil"></div></div>
                </div>
            </div>
        </div>
    </div>

    <div class="controls">
        <div class="btn up" onclick="move(0, -1)">â¬†ï¸</div>
        <div class="btn left" onclick="move(-1, 0)">â¬…ï¸</div>
        <div class="btn down" onclick="move(0, 1)">â¬‡ï¸</div>
        <div class="btn right" onclick="move(1, 0)">â¡ï¸</div>
    </div>

<script>
    // 1 = äº‘æœµå¢™å£, 0 = é€šè·¯, 2 = ç»ˆç‚¹, 9 = èµ·ç‚¹
    const mapLayout = [
        [9, 1, 0, 0, 0, 1, 0, 0, 0, 1],
        [0, 1, 1, 1, 0, 1, 0, 1, 0, 1],
        [0, 0, 0, 0, 0, 0, 0, 1, 0, 1],
        [1, 1, 1, 1, 1, 1, 0, 1, 0, 1],
        [0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
        [0, 1, 1, 0, 1, 1, 1, 1, 1, 0],
        [0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
        [1, 0, 1, 1, 1, 1, 1, 1, 1, 0],
        [1, 0, 0, 0, 0, 0, 0, 0, 1, 0],
        [1, 1, 1, 1, 1, 1, 1, 0, 0, 2]
    ];

    const cellSize = 35; // æ¯ä¸ªæ ¼å­çš„åƒç´ å¤§å°
    let playerPos = { x: 0, y: 0 };
    const board = document.getElementById('game-board');
    const player = document.getElementById('player');

    // åˆå§‹åŒ–åœ°å›¾
    function initGame() {
        board.innerHTML = ''; // æ¸…ç©º
        board.appendChild(player); // æŠŠä¸»è§’æ”¾å›å»

        for (let y = 0; y < 10; y++) {
            for (let x = 0; x < 10; x++) {
                const cell = document.createElement('div');
                cell.style.width = cellSize + 'px';
                cell.style.height = cellSize + 'px';
                
                if (mapLayout[y][x] === 1) {
                    cell.className = 'wall';
                } else if (mapLayout[y][x] === 2) {
                    cell.className = 'goal';
                } else {
                    cell.className = 'path';
                }
                
                if (mapLayout[y][x] === 9) {
                    playerPos = { x, y };
                }
                
                board.appendChild(catPlaceHolder(cell)); // å°†æ ¼å­åŠ å…¥
                board.appendChild(cell);
            }
        }
        updatePlayerPos();
    }

    // è¾…åŠ©å‡½æ•°ï¼šåªæ˜¯ä¸ºäº†è®©ä»£ç ç»“æ„ä¸æŠ¥é”™ï¼Œå®é™…ä¸Šç›´æ¥ appendChild å°±è¡Œ
    function catPlaceHolder(el) { return document.createDocumentFragment(); }

    // ç§»åŠ¨é€»è¾‘
    function move(dx, dy) {
        const newX = playerPos.x + dx;
        const newY = playerPos.y + dy;

        // æ£€æŸ¥è¾¹ç•Œ
        if (newX < 0 || newX >= 10 || newY < 0 || newY >= 10) return;

        // æ£€æŸ¥æ’å¢™
        if (mapLayout[newY][newX] === 1) {
            // æ’å¢™åé¦ˆï¼šç¨å¾®æ™ƒåŠ¨ä¸€ä¸‹
            player.style.transform = `translate(${playerPos.x * cellSize + dx*5}px, ${playerPos.y * cellSize + dy*5}px)`;
            setTimeout(() => updatePlayerPos(), 100);
            return;
        }

        // ç§»åŠ¨
        playerPos.x = newX;
        playerPos.y = newY;
        updatePlayerPos();

        // æ£€æŸ¥èƒœåˆ©
        if (mapLayout[newY][newX] === 2) {
            win();
        }
    }

    function updatePlayerPos() {
        player.style.transform = `translate(${playerPos.x * cellSize}px, ${playerPos.y * cellSize}px)`;
    }

    function win() {
        const msg = document.getElementById('win-msg');
        msg.style.display = 'block';
        player.style.animation = 'eat-anim 0.5s infinite'; // åƒåˆ°ä¸œè¥¿å˜å¤§
        
        setTimeout(() => {
            msg.style.display = 'none';
            player.style.animation = '';
            // é‡ç½®å›èµ·ç‚¹ï¼ˆç®€å•å¾ªç¯ï¼‰
            playerPos = { x: 0, y: 0 };
            updatePlayerPos();
        }, 2000);
    }

    // é”®ç›˜æ”¯æŒ
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowUp') move(0, -1);
        if (e.key === 'ArrowDown') move(0, 1);
        if (e.key === 'ArrowLeft') move(-1, 0);
        if (e.key === 'ArrowRight') move(1, 0);
    });

    initGame();

</script>
</body>
</html>
